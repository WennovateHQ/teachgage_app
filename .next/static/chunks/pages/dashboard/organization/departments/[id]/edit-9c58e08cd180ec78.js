(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{82563:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/organization/departments/[id]/edit",function(){return a(59535)}])},28562:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},77918:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},32089:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},39889:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},185:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},4307:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},14235:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},2553:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},38361:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},70775:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},78497:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},15452:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},69819:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},36127:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},55264:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8267:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},89176:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},62190:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},46611:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(63759).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},81476:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var n=a(85893),r=a(41664),s=a.n(r),i=a(38361),l=a(4307);function d(e){let{items:t=[]}=e,a=[{name:"Dashboard",href:"/dashboard",icon:i.Z},...t];return(0,n.jsx)("nav",{className:"flex items-center space-x-2 text-sm text-teachgage-navy mb-6",children:a.map((e,t)=>{let r=t===a.length-1,i=e.icon;return(0,n.jsxs)("div",{className:"flex items-center",children:[t>0&&(0,n.jsx)(l.Z,{className:"w-4 h-4 text-gray-400 mx-2"}),r?(0,n.jsxs)("span",{className:"text-teachgage-blue font-medium flex items-center",children:[i&&(0,n.jsx)(i,{className:"w-4 h-4 mr-1"}),e.name]}):(0,n.jsxs)(s(),{href:e.href,className:"hover:text-teachgage-blue flex items-center transition-colors",children:[i&&(0,n.jsx)(i,{className:"w-4 h-4 mr-1"}),e.name]})]},t)})})}},59535:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(85893),r=a(67294),s=a(11163),i=a(9008),l=a.n(i),d=a(37363),o=a(81476),c=a(28259),h=a(64017),u=a(185),m=a(69819);function p(){let e=(0,s.useRouter)(),{id:t}=e.query,{user:a,isAuthenticated:i,isLoading:p}=(0,c.a)(),[x,y]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[b,k]=(0,r.useState)([]),[v,j]=(0,r.useState)(!1),[N,Z]=(0,r.useState)(!0),[w,z]=(0,r.useState)({name:"",code:"",description:"",headId:"",email:"",phone:"",location:""}),[M,C]=(0,r.useState)({});(0,r.useEffect)(()=>{if(!i&&!p){e.push("/auth/signin");return}if(a&&"organization_admin"!==a.role){e.push("/dashboard");return}t&&(null==a?void 0:a.organizationId)&&S()},[t,a,i,p,e]);let S=()=>{try{let n=h.W9.find(e=>e.id===t&&e.organizationId===a.organizationId);if(!n){e.push("/dashboard/organization/departments");return}y(n),z({name:n.name||"",code:n.code||"",description:n.description||"",headId:n.headId||"",email:n.email||"",phone:n.phone||"",location:n.location||""});let r=h.IR.find(e=>e.id===a.organizationId);f(r);let s=h.Ft.organizationInstructors.filter(e=>e.departmentId===t&&e.organizationId===a.organizationId);k(s)}catch(e){console.error("Failed to load department data:",e)}finally{Z(!1)}},I=e=>{let{name:t,value:a}=e.target;z(e=>({...e,[t]:a})),M[t]&&C(e=>({...e,[t]:""}))},D=()=>{let e={};return w.name.trim()||(e.name="Department name is required"),w.code.trim()||(e.code="Department code is required"),w.email&&!/\S+@\S+\.\S+/.test(w.email)&&(e.email="Email format is invalid"),e},q=async a=>{a.preventDefault();let n=D();if(Object.keys(n).length>0){C(n);return}j(!0);try{await new Promise(e=>setTimeout(e,1e3)),alert("Department updated successfully!"),e.push("/dashboard/organization/departments/".concat(t))}catch(e){console.error("Save error:",e),alert("Failed to update department. Please try again.")}finally{j(!1)}},F=[{label:"Dashboard",href:"/dashboard"},{label:"Organization",href:"/dashboard/organization"},{label:"Departments",href:"/dashboard/organization/departments"},{label:(null==x?void 0:x.name)||"Department",href:"/dashboard/organization/departments/".concat(t)},{label:"Edit",href:"/dashboard/organization/departments/".concat(t,"/edit")}];return p||N?(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teachgage-blue"})})}):x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:(0,n.jsxs)("title",{children:["Edit ",x.name," - TeachGage"]})}),(0,n.jsx)(d.Z,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(o.Z,{items:F}),(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-teachgage-blue",children:"Edit Department"}),(0,n.jsxs)("p",{className:"text-teachgage-navy",children:["Update department information for ",null==g?void 0:g.name]})]})}),(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,n.jsxs)("form",{onSubmit:q,children:[(0,n.jsx)("div",{className:"p-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)("div",{className:"md:col-span-2",children:(0,n.jsx)("h3",{className:"text-lg font-semibold text-teachgage-blue mb-4",children:"Basic Information"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Name *"}),(0,n.jsx)("input",{type:"text",id:"name",name:"name",value:w.name,onChange:I,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent ".concat(M.name?"border-red-300":"border-gray-300"),placeholder:"e.g., Computer Science"}),M.name&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:M.name})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Code *"}),(0,n.jsx)("input",{type:"text",id:"code",name:"code",value:w.code,onChange:I,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent ".concat(M.code?"border-red-300":"border-gray-300"),placeholder:"e.g., CS"}),M.code&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:M.code})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,n.jsx)("textarea",{id:"description",name:"description",rows:3,value:w.description,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Brief description of the department"})]}),(0,n.jsx)("div",{className:"md:col-span-2 mt-6",children:(0,n.jsx)("h3",{className:"text-lg font-semibold text-teachgage-blue mb-4",children:"Department Head"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"headId",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Head"}),(0,n.jsxs)("select",{id:"headId",name:"headId",value:w.headId,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,n.jsx)("option",{value:"",children:"Select department head"}),b.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," (",e.email,")"]},e.id))]})]}),(0,n.jsx)("div",{className:"md:col-span-2 mt-6",children:(0,n.jsx)("h3",{className:"text-lg font-semibold text-teachgage-blue mb-4",children:"Contact Information"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Department Email"}),(0,n.jsx)("input",{type:"email",id:"email",name:"email",value:w.email,onChange:I,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent ".concat(M.email?"border-red-300":"border-gray-300"),placeholder:"department@organization.com"}),M.email&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:M.email})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,n.jsx)("input",{type:"tel",id:"phone",name:"phone",value:w.phone,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"(555) 123-4567"})]}),(0,n.jsxs)("div",{className:"md:col-span-2",children:[(0,n.jsx)("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,n.jsx)("input",{type:"text",id:"location",name:"location",value:w.location,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Building name, floor, room number"})]})]})}),(0,n.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{type:"button",onClick:()=>{e.push("/dashboard/organization/departments/".concat(t))},disabled:v,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",disabled:v,className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})})]})})]})})]}):(0,n.jsx)(d.Z,{children:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(u.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Department Not Found"}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"The department you're trying to edit doesn't exist or you don't have access to it."}),(0,n.jsx)("button",{onClick:()=>e.push("/dashboard/organization/departments"),className:"px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:"Back to Departments"})]})})}},11163:function(e,t,a){e.exports=a(43079)}},function(e){e.O(0,[7005,2430,7363,2888,9774,179],function(){return e(e.s=82563)}),_N_E=e.O()}]);