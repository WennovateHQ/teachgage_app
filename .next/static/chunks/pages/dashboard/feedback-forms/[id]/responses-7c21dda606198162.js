(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9719],{63384:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/feedback-forms/[id]/responses",function(){return s(74497)}])},92761:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},10709:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]])},4307:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},12779:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7571:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},70088:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},37864:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},81476:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(85893),r=s(41664),n=s.n(r),l=s(38361),c=s(4307);function i(e){let{items:t=[]}=e,s=[{name:"Dashboard",href:"/dashboard",icon:l.Z},...t];return(0,a.jsx)("nav",{className:"flex items-center space-x-2 text-sm text-teachgage-navy mb-6",children:s.map((e,t)=>{let r=t===s.length-1,l=e.icon;return(0,a.jsxs)("div",{className:"flex items-center",children:[t>0&&(0,a.jsx)(c.Z,{className:"w-4 h-4 text-gray-400 mx-2"}),r?(0,a.jsxs)("span",{className:"text-teachgage-blue font-medium flex items-center",children:[l&&(0,a.jsx)(l,{className:"w-4 h-4 mr-1"}),e.name]}):(0,a.jsxs)(n(),{href:e.href,className:"hover:text-teachgage-blue flex items-center transition-colors",children:[l&&(0,a.jsx)(l,{className:"w-4 h-4 mr-1"}),e.name]})]},t)})})}},74497:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return M}});var a=s(85893),r=s(67294),n=s(11163),l=s(9008),c=s.n(l),i=s(41664),o=s.n(i),d=s(37363),h=s(81476),u=s(28259),m=s(64017),x=s(15452),g=s(92761),p=s(70088),f=s(10709),y=s(2553),b=s(12779),j=s(36127),v=s(23346),N=s(37864),w=s(7571),k=s(89176),Z=s(15928),S=s(7162);function M(){let e=(0,n.useRouter)(),{id:t}=e.query,{user:s,isAuthenticated:l,isLoading:i}=(0,u.a)(),[M,D]=(0,r.useState)(null),[q,_]=(0,r.useState)(!0),[C,R]=(0,r.useState)([]),[T,L]=(0,r.useState)([]),[A,E]=(0,r.useState)(""),[F,H]=(0,r.useState)("all"),[O,V]=(0,r.useState)([]),I=e=>{if(!e||!e.questions)return[];let t=[],s=e.responseCount||0;for(let a=0;a<s;a++){let s={id:"response_".concat(a+1),submittedAt:new Date(Date.now()-864e5*a-864e5*Math.random()),answers:e.questions.map(e=>{switch(e.type){case"rating":return{questionId:e.id,question:e.question,type:e.type,value:Math.floor(5*Math.random())+1};case"multiple_choice":let t=e.options||["Option 1","Option 2","Option 3"];return{questionId:e.id,question:e.question,type:e.type,value:t[Math.floor(Math.random()*t.length)]};default:let s=["This course was very helpful and informative.","I enjoyed the practical examples and hands-on activities.","The instructor was knowledgeable and engaging.","Could use more interactive elements.","Great content, well organized.","The pace was just right for me.","Would recommend to others.","Some topics could be explained in more detail."];return{questionId:e.id,question:e.question,type:e.type,value:s[Math.floor(Math.random()*s.length)]}}}),isAnonymous:!0};t.push(s)}return t.sort((e,t)=>new Date(t.submittedAt)-new Date(e.submittedAt))};if((0,r.useEffect)(()=>{t&&setTimeout(()=>{let e=m.Ph.find(e=>e.id===t);if(e){D(e);let t=I(e);R(t),L(t)}_(!1)},500)},[t]),(0,r.useEffect)(()=>{let e=C;if(A&&(e=e.filter(e=>e.answers.some(e=>e.value.toString().toLowerCase().includes(A.toLowerCase())))),"all"!==F){let t=new Date,s=new Date;switch(F){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(t.getDate()-7);break;case"month":s.setMonth(t.getMonth()-1)}e=e.filter(e=>new Date(e.submittedAt)>=s)}L(e)},[C,A,F]),i||q)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})});if(!l)return e.push("/auth/signin"),null;if(!M)return(0,a.jsx)(d.Z,{title:"Survey Not Found",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(x.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-teachgage-blue mb-2",children:"Survey Not Found"}),(0,a.jsx)("p",{className:"text-teachgage-navy mb-6",children:"The survey you're looking for doesn't exist or you don't have access to it."}),(0,a.jsx)(o(),{href:"/dashboard/feedback-forms",children:(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Back to Surveys"]})})]})});let U=e=>{V(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},z=e=>{switch(e){case"rating":return p.Z;case"multiple_choice":return f.Z;case"text":return x.Z;default:return y.Z}},B=[{name:"Surveys",href:"/dashboard/feedback-forms",icon:x.Z},{name:M.title,href:"/dashboard/feedback-forms/".concat(t)},{name:"Responses"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsxs)("title",{children:["Responses - ",M.title," - TeachGage"]}),(0,a.jsx)("meta",{name:"description",content:"View all responses for ".concat(M.title)})]}),(0,a.jsx)(d.Z,{title:"".concat(M.title," - Responses"),children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(h.Z,{items:B}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-teachgage-blue",children:"Survey Responses"}),(0,a.jsxs)("p",{className:"text-teachgage-navy",children:[T.length," of ",C.length," responses",A||"all"!==F?" (filtered)":""]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o(),{href:"/dashboard/feedback-forms/".concat(t),children:(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 text-teachgage-navy border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Back to Survey"]})}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([[["Response ID","Submitted At",...M.questions.map(e=>e.question)].join(","),...T.map(e=>[e.id,(0,S.Z)(new Date(e.submittedAt),"yyyy-MM-dd HH:mm:ss"),...e.answers.map(e=>'"'.concat(e.value,'"'))].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="".concat(M.title,"_responses.csv"),s.click(),window.URL.revokeObjectURL(t)},className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Responses"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(j.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",id:"search",value:A,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Search in responses..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"dateFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(v.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsxs)("select",{id:"dateFilter",value:F,onChange:e=>H(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Time"}),(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"month",children:"Last 30 Days"})]})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{E(""),H("all")},className:"w-full px-4 py-2 text-teachgage-navy border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:T.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:O.length===T.length,onChange:()=>{O.length===T.length?V([]):V(T.map(e=>e.id))},className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:O.length>0?"".concat(O.length," selected"):"Select all"})]}),O.length>0&&(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("button",{className:"inline-flex items-center px-3 py-1 text-sm text-red-600 border border-red-300 rounded hover:bg-red-50",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),"Delete Selected"]})})]})}),(0,a.jsx)("div",{className:"divide-y divide-gray-200",children:T.map(e=>(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:O.includes(e.id),onChange:()=>U(e.id),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-teachgage-blue",children:["Response #",e.id.split("_")[1]]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Submitted ",(0,S.Z)(new Date(e.submittedAt),"MMM d, yyyy h:mm a")]})]})]}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"space-y-4",children:e.answers.map((e,t)=>{let s=z(e.type);return(0,a.jsxs)("div",{className:"border-l-4 border-teachgage-blue pl-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-2 mb-1",children:[(0,a.jsx)(s,{className:"w-4 h-4 text-teachgage-blue mt-0.5"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e.question})]}),(0,a.jsx)("div",{className:"ml-6",children:"rating"===e.type?(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(t=>(0,a.jsx)(p.Z,{className:"w-4 h-4 ".concat(t<=e.value?"text-yellow-400 fill-current":"text-gray-300")},t)),(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.value,"/5)"]})]}):(0,a.jsx)("p",{className:"text-teachgage-navy",children:e.value})})]},t)})})]},e.id))})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(k.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-teachgage-blue mb-2",children:0===C.length?"No Responses Yet":"No Matching Responses"}),(0,a.jsx)("p",{className:"text-teachgage-navy mb-6",children:0===C.length?"Share your survey to start collecting responses.":"Try adjusting your search or filter criteria."}),0===C.length&&(0,a.jsx)(o(),{href:"/dashboard/feedback-forms/".concat(t),children:(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"View Survey Details"]})})]})})]})})]})}}},function(e){e.O(0,[7005,2430,1940,7363,2888,9774,179],function(){return e(e.s=63384)}),_N_E=e.O()}]);