(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8926],{5632:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/feedback-forms/create",function(){return t(75670)}])},75670:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Z}});var a=t(85893),r=t(67294),l=t(11163),n=t(9008),c=t.n(n),i=t(41664),o=t.n(i),d=t(37363),x=t(28259),h=t(64017),u=t(70088),m=t(10709),g=t(15452),p=t(57251),b=t(23346),y=t(19305),j=t(61929),f=t(37864),v=t(62190),N=t(92761),w=t(15928),k=t(60493),q=t(43765),C=t(69819);function Z(){let e=(0,l.useRouter)(),{courseId:s}=e.query,{user:t,isAuthenticated:n,isLoading:i}=(0,x.a)(),[Z,S]=(0,r.useState)(!1),[_,F]=(0,r.useState)({type:"",text:""}),[D,E]=(0,r.useState)(!1),[T,P]=(0,r.useState)({title:"",description:"",courseId:s||"",status:"draft",anonymous:!0,allowMultipleResponses:!1,startDate:"",endDate:"",questions:[]}),A=[{id:"rating",name:"Rating Scale",icon:u.Z,description:"1-5 star rating"},{id:"multiple_choice",name:"Multiple Choice",icon:m.Z,description:"Select one option"},{id:"checkbox",name:"Checkboxes",icon:m.Z,description:"Select multiple options"},{id:"text",name:"Text Response",icon:g.Z,description:"Open-ended text"},{id:"textarea",name:"Long Text",icon:g.Z,description:"Multi-line text"},{id:"number",name:"Number",icon:p.Z,description:"Numeric input"},{id:"date",name:"Date",icon:b.Z,description:"Date picker"},{id:"yes_no",name:"Yes/No",icon:y.Z,description:"Binary choice"}];if(i)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})});if(!n)return e.push("/auth/signin"),null;let O=e=>{let{name:s,value:t,type:a,checked:r}=e.target;P(e=>({...e,[s]:"checkbox"===a?r:t}))},R=e=>{let s={id:Date.now(),type:e,question:"",required:!1,options:M(e)};P(e=>({...e,questions:[...e.questions,s]}))},M=e=>{switch(e){case"rating":return{scale:5,labels:["Poor","Fair","Good","Very Good","Excellent"]};case"multiple_choice":case"checkbox":return{choices:["Option 1","Option 2","Option 3"]};case"likert":return{statements:["Statement 1"],scale:["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"]};case"text":case"textarea":return{placeholder:"Enter your response..."};case"number":return{min:0,max:100};default:return{}}},I=(e,s,t)=>{P(a=>({...a,questions:a.questions.map(a=>a.id===e?{...a,[s]:t}:a)}))},Q=e=>{P(s=>({...s,questions:s.questions.filter(s=>s.id!==e)}))},B=async s=>{if(s.preventDefault(),S(!0),F({type:"",text:""}),!T.title.trim()){F({type:"error",text:"Form title is required."}),S(!1);return}if(0===T.questions.length){F({type:"error",text:"Please add at least one question."}),S(!1);return}try{await new Promise(e=>setTimeout(e,1500)),F({type:"success",text:"Feedback form created successfully!"}),setTimeout(()=>{e.push("/dashboard/feedback-forms")},2e3)}catch(e){F({type:"error",text:"Failed to create form. Please try again."})}finally{S(!1)}},G=(e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-teachgage-navy",children:["Question ",s+1]})]}),(0,a.jsx)("button",{onClick:()=>Q(e.id),className:"text-red-500 hover:text-red-700 transition-colors",children:(0,a.jsx)(f.Z,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Question Text"}),(0,a.jsx)("input",{type:"text",value:e.question,onChange:s=>I(e.id,"question",s.target.value),placeholder:"Enter your question...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"required-".concat(e.id),checked:e.required,onChange:s=>I(e.id,"required",s.target.checked),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"required-".concat(e.id),className:"ml-2 text-sm text-teachgage-navy",children:"Required question"})]}),("multiple_choice"===e.type||"checkbox"===e.type)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Options"}),(0,a.jsxs)("div",{className:"space-y-2",children:[e.options.choices.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:s,onChange:s=>{let a=[...e.options.choices];a[t]=s.target.value,I(e.id,"options",{...e.options,choices:a})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"}),(0,a.jsx)("button",{onClick:()=>{let s=e.options.choices.filter((e,s)=>s!==t);I(e.id,"options",{...e.options,choices:s})},className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(v.Z,{className:"w-4 h-4"})})]},t)),(0,a.jsx)("button",{onClick:()=>{let s=[...e.options.choices,"Option ".concat(e.options.choices.length+1)];I(e.id,"options",{...e.options,choices:s})},className:"text-sm text-teachgage-blue hover:text-teachgage-medium-blue",children:"+ Add Option"})]})]}),"rating"===e.type&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Scale (1-10)"}),(0,a.jsx)("select",{value:e.options.scale,onChange:s=>I(e.id,"options",{...e.options,scale:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:Array.from({length:10},(e,s)=>(0,a.jsx)("option",{value:s+1,children:s+1},s+1))})]})}),("text"===e.type||"textarea"===e.type)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Placeholder Text"}),(0,a.jsx)("input",{type:"text",value:e.options.placeholder,onChange:s=>I(e.id,"options",{...e.options,placeholder:s.target.value}),placeholder:"Enter placeholder text...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]})]},e.id);return D?(0,a.jsx)(d.Z,{title:"Preview Form",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-teachgage-blue",children:"Form Preview"}),(0,a.jsxs)("button",{onClick:()=>E(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-teachgage-navy rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Back to Editor"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-teachgage-blue mb-2",children:T.title||"Untitled Form"}),(0,a.jsx)("p",{className:"text-teachgage-navy",children:T.description||"No description provided."})]}),(0,a.jsx)("div",{className:"space-y-8",children:T.questions.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-teachgage-blue",children:[s+1,". ",e.question||"Question text",e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"rating"===e.type&&(0,a.jsx)("div",{className:"flex space-x-2",children:Array.from({length:e.options.scale},(e,s)=>(0,a.jsx)(u.Z,{className:"w-6 h-6 text-gray-300 border border-gray-300 rounded p-1"},s))}),("multiple_choice"===e.type||"checkbox"===e.type)&&(0,a.jsx)("div",{className:"space-y-2",children:e.options.choices.map((s,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"multiple_choice"===e.type?"radio":"checkbox",disabled:!0,className:"h-4 w-4 text-teachgage-blue border-gray-300"}),(0,a.jsx)("label",{className:"ml-2 text-teachgage-navy",children:s})]},t))}),"text"===e.type&&(0,a.jsx)("input",{type:"text",placeholder:e.options.placeholder,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"}),"textarea"===e.type&&(0,a.jsx)("textarea",{placeholder:e.options.placeholder,disabled:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50"})]},e.id))})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:"Create Survey - TeachGage"}),(0,a.jsx)("meta",{name:"description",content:"Create a new survey for your course"})]}),(0,a.jsx)(d.Z,{title:"Create Survey",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-teachgage-navy",children:[(0,a.jsx)(o(),{href:"/dashboard",className:"hover:text-teachgage-blue",children:"Dashboard"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)(o(),{href:"/dashboard/feedback-forms",className:"hover:text-teachgage-blue",children:"Surveys"}),(0,a.jsx)("span",{children:"/"}),(0,a.jsx)("span",{className:"text-teachgage-blue font-medium",children:"Create"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-teachgage-blue",children:"Create Survey"}),(0,a.jsx)("p",{className:"text-teachgage-navy",children:"Build a custom survey for your course"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-teachgage-navy rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4 mr-2"}),"Preview"]}),(0,a.jsx)(o(),{href:"/dashboard/feedback-forms",children:(0,a.jsxs)("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 text-teachgage-navy rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4 mr-2"}),"Cancel"]})})]})]}),_.text&&(0,a.jsxs)("div",{className:"p-4 rounded-lg flex items-center ".concat("success"===_.type?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:["success"===_.type?(0,a.jsx)(k.Z,{className:"w-5 h-5 mr-2"}):(0,a.jsx)(q.Z,{className:"w-5 h-5 mr-2"}),_.text]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-teachgage-blue mb-4",children:"Basic Information"}),(0,a.jsxs)("form",{onSubmit:B,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Form Title *"}),(0,a.jsx)("input",{type:"text",name:"title",value:T.title,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Enter form title",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Description"}),(0,a.jsx)("textarea",{name:"description",value:T.description,onChange:O,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Describe the purpose of this feedback form..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Course"}),(0,a.jsxs)("select",{name:"courseId",value:T.courseId,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select a course (optional)"}),h.dt.map(e=>(0,a.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-teachgage-navy mb-2",children:"Status"}),(0,a.jsxs)("select",{name:"status",value:T.status,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"closed",children:"Closed"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"anonymous",name:"anonymous",checked:T.anonymous,onChange:O,className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"anonymous",className:"ml-2 text-sm text-teachgage-navy",children:"Anonymous responses"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"allowMultipleResponses",name:"allowMultipleResponses",checked:T.allowMultipleResponses,onChange:O,className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"allowMultipleResponses",className:"ml-2 text-sm text-teachgage-navy",children:"Allow multiple responses from same user"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-teachgage-blue",children:"Questions"}),(0,a.jsxs)("span",{className:"text-sm text-teachgage-navy",children:[T.questions.length," questions"]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[T.questions.map((e,s)=>G(e,s)),0===T.questions.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-teachgage-navy",children:[(0,a.jsx)(g.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"mb-4",children:"No questions added yet. Choose a question type to get started."})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{onClick:B,disabled:Z,className:"inline-flex items-center px-6 py-3 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors disabled:opacity-50",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 mr-2"}),Z?"Creating...":"Create Form"]})})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-teachgage-blue mb-4",children:"Add Questions"}),(0,a.jsx)("div",{className:"space-y-3",children:A.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>R(e.id),className:"w-full flex items-start p-3 border border-gray-200 rounded-lg hover:border-teachgage-blue hover:bg-gray-50 transition-colors text-left",children:[(0,a.jsx)(s,{className:"w-5 h-5 text-teachgage-blue mr-3 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-teachgage-navy",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]},e.id)})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-teachgage-blue mb-2",children:"Tips"}),(0,a.jsxs)("ul",{className:"text-sm text-teachgage-navy space-y-1",children:[(0,a.jsx)("li",{children:"• Keep questions clear and concise"}),(0,a.jsx)("li",{children:"• Use rating scales for quantitative feedback"}),(0,a.jsx)("li",{children:"• Include open-ended questions for detailed insights"}),(0,a.jsx)("li",{children:"• Mark important questions as required"})]})]})]})]})]})})]})}}},function(e){e.O(0,[7005,2430,8564,7363,2888,9774,179],function(){return e(e.s=5632)}),_N_E=e.O()}]);