(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8215],{97432:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/feedback-forms",function(){return a(46688)}])},18289:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},47935:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},96815:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4270:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},86082:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},37864:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(63759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},46688:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var t=a(85893),r=a(67294),l=a(11163),n=a(9008),c=a.n(n),i=a(41664),d=a.n(i),o=a(37363),x=a(28259),h=a(40307),u=a(4270),m=a(36127),g=a(47935),y=a(2553),f=a(23346),j=a(89176),b=a(18289),v=a(86082),p=a(28562),N=a(15928),w=a(96815),k=a(37864),Z=a(7162);function C(){let{user:e,isAuthenticated:s,isLoading:a}=(0,x.a)(),n=(0,l.useRouter)(),[i,C]=(0,r.useState)(""),[M,S]=(0,r.useState)("all"),[_,A]=(0,r.useState)(!1),[F,L]=(0,r.useState)(null),{data:T,isLoading:q,error:E}=(0,h.m0)({search:i,status:"all"!==M?M:void 0}),P=(0,h.PW)();if(a)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})});if(!s)return n.push("/auth/signin"),null;let D=async()=>{if(F)try{await P.mutateAsync(F.id),A(!1),L(null)}catch(e){console.error("Error deleting form:",e)}},V=e=>{let s="".concat(window.location.origin,"/feedback/").concat(e);navigator.clipboard.writeText(s)},z=((null==T?void 0:T.data)||[]).filter(e=>{var s;let a=e.title.toLowerCase().includes(i.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(i.toLowerCase())),t="all"===M||e.status===M;return a&&t});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:"Surveys - TeachGage"}),(0,t.jsx)("meta",{name:"description",content:"Manage your surveys"})]}),(0,t.jsxs)(o.Z,{title:"Surveys",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Surveys"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Create and manage anonymous surveys for your courses"})]}),(0,t.jsx)(d(),{href:"/dashboard/feedback-forms/create",children:(0,t.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Create Survey"]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search forms...",value:i,onChange:e=>C(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("select",{value:M,onChange:e=>S(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"active",children:"Active"}),(0,t.jsx)("option",{value:"draft",children:"Draft"}),(0,t.jsx)("option",{value:"closed",children:"Closed"})]})]})]})}),a?(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsx)("div",{className:"bg-white rounded-lg shadow animate-pulse",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-5 bg-gray-200 rounded mb-2 w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-4 w-1/2"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-24"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),(0,t.jsx)("div",{className:"h-8 w-8 bg-gray-200 rounded"})]})})},s))}):E?(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:(0,t.jsx)("p",{className:"text-red-600",children:"Failed to load feedback forms. Please try again."})}):0===z.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,t.jsx)(y.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No feedback forms found"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:i||"all"!==M?"Try adjusting your search or filter criteria.":"Get started by creating your first feedback form."}),!i&&"all"===M&&(0,t.jsx)(d(),{href:"/dashboard/feedback-forms/create",children:(0,t.jsxs)("button",{className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Create Your First Form"]})})]}):(0,t.jsx)("div",{className:"space-y-4",children:z.map(e=>{var s,a;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,t.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"draft"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:(null===(s=e.status)||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===(a=e.status)||void 0===a?void 0:a.slice(1))})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.description||"No description available"}),(0,t.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsxs)("span",{children:["Created ",e.createdAt?(0,Z.Z)(new Date(e.createdAt),"MMM d, yyyy"):"N/A"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsxs)("span",{children:[e.responseCount||0," responses"]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(y.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsxs)("span",{children:[e.questionCount||0," questions"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:["active"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>V(e.id),className:"p-2 text-gray-400 hover:text-teachgage-blue transition-colors",title:"Copy form link",children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})}),(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-teachgage-blue transition-colors",children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})})]}),(0,t.jsx)(d(),{href:"/dashboard/feedback-forms/".concat(e.id,"?tab=analytics"),children:(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-teachgage-blue transition-colors",children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(d(),{href:"/dashboard/feedback-forms/".concat(e.id),children:(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-teachgage-blue transition-colors",children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(d(),{href:"/dashboard/feedback-forms/".concat(e.id,"?tab=settings"),children:(0,t.jsx)("button",{className:"p-2 text-gray-400 hover:text-teachgage-blue transition-colors",children:(0,t.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,t.jsx)("button",{onClick:()=>{L(e),A(!0)},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]})]}),e.course&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Course:"}),(0,t.jsx)("span",{className:"ml-2",children:e.course.name}),e.course.code&&(0,t.jsxs)("span",{className:"ml-2 text-gray-400",children:["(",e.course.code,")"]})]})})]})},e.id)})})]}),_&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Delete Feedback Form"}),(0,t.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',null==F?void 0:F.title,'"? This will also delete all associated responses. This action cannot be undone.']}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{onClick:()=>{A(!1),L(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,t.jsx)("button",{onClick:D,disabled:P.isLoading,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:P.isLoading?"Deleting...":"Delete"})]})]})})]})]})}}},function(e){e.O(0,[7005,2430,1940,7066,7363,307,2888,9774,179],function(){return e(e.s=97432)}),_N_E=e.O()}]);