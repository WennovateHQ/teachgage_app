(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1022],{22259:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/survey-builder",function(){return s(71202)}])},63759:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(67294),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=s;return(0,a.createElement)("svg",{ref:n,...r,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(l(e)),u].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(m)?m:[m]])});return s.displayName="".concat(e),s}},42171:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},18289:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},15928:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},69819:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},37864:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},71202:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return L}});var a=s(85893),r=s(67294),l=s(11163),n=s(9008),i=s.n(n),o=s(60887),c=s(45587),d=s(24285);let u=e=>{let{transform:t}=e;return{...t,x:0}},m=e=>{let{transform:t,draggingNodeRect:s,windowRect:a}=e;return s&&a?function(e,t,s){let a={...e};return t.top+e.y<=s.top?a.y=s.top-t.top:t.bottom+e.y>=s.top+s.height&&(a.y=s.top+s.height-t.bottom),t.left+e.x<=s.left?a.x=s.left-t.left:t.right+e.x>=s.left+s.width&&(a.x=s.left+s.width-t.right),a}(t,s,a):t};var x=s(15928),g=s(69819),h=s(4270),p=s(86501),b=s(62190);function f(e){let{questionTypes:t,onSelectType:s,onClose:r}=e;return(0,a.jsxs)("div",{className:"w-80 bg-white border-l border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Question"}),(0,a.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(b.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"w-full flex items-center p-4 text-left border border-gray-200 rounded-lg hover:border-teachgage-blue hover:bg-blue-50 transition-colors group",children:[(0,a.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 group-hover:text-teachgage-blue",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:{multiple_choice:"Single or multiple selection from predefined options",likert_scale:"Agreement scale for multiple statements",rating:"Star or numeric rating system",slider:"Continuous scale with drag control",open_ended:"Free text response field",dropdown:"Select from dropdown menu",matrix:"Grid of questions and answer options",rank_order:"Drag to rank options in order of preference",dichotomous:"Simple Yes/No or True/False question",opinion_scale:"Numeric scale with custom labels"}[e.id]||"Custom question type"})]})]},e.id))}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 Pro Tip"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"You can drag and drop questions to reorder them after adding them to your survey."})]})]})}var y=s(61929),v=s(42171),j=s(63759);let N=(0,j.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var w=s(18289),k=s(37864);function C(e){let{question:t,index:s,isActive:r,isCollapsed:l,onUpdate:n,onDelete:i,onDuplicate:o,onToggleCollapse:u,onSetActive:m}=e,{attributes:x,listeners:g,setNodeRef:p,transform:f,transition:j,isDragging:C}=(0,c.nB)({id:t.id}),q={transform:d.ux.Transform.toString(f),transition:j,opacity:C?.5:1},D=(e,s)=>{n(t.id,{[e]:s})};return(0,a.jsxs)("div",{ref:p,style:q,className:"bg-white rounded-lg border-2 transition-colors ".concat(r?"border-teachgage-blue":"border-gray-200"," ").concat(C?"shadow-lg":"shadow-sm"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{...x,...g,className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(y.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["Question ",s+1]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:S(t.type)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>u(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:l?(0,a.jsx)(v.Z,{className:"h-4 w-4"}):(0,a.jsx)(N,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>o(t.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Duplicate Question",children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>i(t.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete Question",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})})]})]}),!l&&(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text"}),(0,a.jsx)("textarea",{value:t.question,onChange:e=>D("question",e.target.value),onClick:()=>m(t.id),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent resize-none",rows:2,placeholder:"Enter your question..."})]}),(0,a.jsx)("div",{className:"space-y-4",children:function(e,t){var s,r,l,n,i;let{handleQuestionChange:o,addOption:c,updateOption:d,removeOption:u,addStatement:m,updateStatement:x,removeStatement:g}=t;switch(e.type){case"multiple_choice":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Options"}),(0,a.jsxs)("button",{onClick:c,className:"text-sm text-teachgage-blue hover:text-teachgage-medium-blue flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(e.options||[]).map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>d(s,e.target.value),className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Option ".concat(s+1)}),e.options.length>1&&(0,a.jsx)("button",{onClick:()=>u(s),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]},s))}),(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.allowMultiple,onChange:e=>o("allowMultiple",e.target.checked),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Allow multiple selections"})]})})]});case"likert_scale":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Statements"}),(0,a.jsxs)("button",{onClick:m,className:"text-sm text-teachgage-blue hover:text-teachgage-medium-blue flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Add Statement"]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:(e.statements||[]).map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>x(s,e.target.value),className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Statement ".concat(s+1)}),e.statements.length>1&&(0,a.jsx)("button",{onClick:()=>g(s),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]},s))}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scale Min"}),(0,a.jsx)("input",{type:"number",value:(null===(s=e.scale)||void 0===s?void 0:s.min)||1,onChange:t=>o("scale",{...e.scale,min:parseInt(t.target.value)}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scale Max"}),(0,a.jsx)("input",{type:"number",value:(null===(r=e.scale)||void 0===r?void 0:r.max)||5,onChange:t=>o("scale",{...e.scale,max:parseInt(t.target.value)}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]})]});case"rating":return(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Value"}),(0,a.jsx)("input",{type:"number",value:(null===(l=e.scale)||void 0===l?void 0:l.min)||1,onChange:t=>o("scale",{...e.scale,min:parseInt(t.target.value)}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Value"}),(0,a.jsx)("input",{type:"number",value:(null===(n=e.scale)||void 0===n?void 0:n.max)||5,onChange:t=>o("scale",{...e.scale,max:parseInt(t.target.value)}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step"}),(0,a.jsx)("input",{type:"number",step:"0.1",value:(null===(i=e.scale)||void 0===i?void 0:i.step)||1,onChange:t=>o("scale",{...e.scale,step:parseFloat(t.target.value)}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]});case"slider":return(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Value"}),(0,a.jsx)("input",{type:"number",value:e.min||0,onChange:e=>o("min",parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Value"}),(0,a.jsx)("input",{type:"number",value:e.max||100,onChange:e=>o("max",parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Value"}),(0,a.jsx)("input",{type:"number",value:e.defaultValue||50,onChange:e=>o("defaultValue",parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]});case"open_ended":return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder Text"}),(0,a.jsx)("input",{type:"text",value:e.placeholder||"",onChange:e=>o("placeholder",e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Enter placeholder text..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Length"}),(0,a.jsx)("input",{type:"number",value:e.maxLength||500,onChange:e=>o("maxLength",parseInt(e.target.value)),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]});case"dropdown":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Options"}),(0,a.jsxs)("button",{onClick:c,className:"text-sm text-teachgage-blue hover:text-teachgage-medium-blue flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Add Option"]})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4",children:(e.options||[]).map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:t,onChange:e=>d(s,e.target.value),className:"flex-1 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Option ".concat(s+1)}),e.options.length>1&&(0,a.jsx)("button",{onClick:()=>u(s),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]},s))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placeholder"}),(0,a.jsx)("input",{type:"text",value:e.placeholder||"",onChange:e=>o("placeholder",e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",placeholder:"Select an option..."})]})]});case"dichotomous":return(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yes Label"}),(0,a.jsx)("input",{type:"text",value:e.yesLabel||"Yes",onChange:e=>o("yesLabel",e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"No Label"}),(0,a.jsx)("input",{type:"text",value:e.noLabel||"No",onChange:e=>o("noLabel",e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]})]});default:return(0,a.jsxs)("div",{className:"text-center py-4 text-gray-500",children:["Configuration options for ",S(e.type)," will be available soon."]})}}(t,{handleQuestionChange:D,addOption:()=>{var e;D("options",[...t.options||[],"Option ".concat(((null===(e=t.options)||void 0===e?void 0:e.length)||0)+1)])},updateOption:(e,s)=>{let a=[...t.options||[]];a[e]=s,D("options",a)},removeOption:e=>{D("options",(t.options||[]).filter((t,s)=>s!==e))},addStatement:()=>{var e;D("statements",[...t.statements||[],"Statement ".concat(((null===(e=t.statements)||void 0===e?void 0:e.length)||0)+1)])},updateStatement:(e,s)=>{let a=[...t.statements||[]];a[e]=s,D("statements",a)},removeStatement:e=>{D("statements",(t.statements||[]).filter((t,s)=>s!==e))}})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.required,onChange:e=>D("required",e.target.checked),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Required question"})]})})})]})]})}function S(e){return({multiple_choice:"Multiple Choice",likert_scale:"Likert Scale",rating:"Rating",slider:"Slider",open_ended:"Open Ended",dropdown:"Dropdown",matrix:"Matrix",rank_order:"Rank Order",dichotomous:"Yes/No",opinion_scale:"Opinion Scale"})[e]||"Unknown"}let q=(0,j.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),D=(0,j.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function _(e){let{survey:t,onClose:s,onEdit:l}=e,[n,i]=(0,r.useState)({}),o=(e,t)=>{i(s=>({...s,[e]:t}))};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t.title}),t.description&&(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:t.description})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:l,className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(q,{className:"h-4 w-4 mr-2"}),"Edit Survey"]}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(b.Z,{className:"h-6 w-6"})})]})]})}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Survey responses:",n)},className:"space-y-8",children:[t.questions.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:[t+1,". ",e.question,e.required&&(0,a.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]})}),(0,a.jsx)("div",{className:"space-y-3",children:function(e,t,s){var r,l,n,i,o,c;switch(e.type){case"multiple_choice":return(0,a.jsx)("div",{className:"space-y-2",children:(e.options||[]).map((r,l)=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:e.allowMultiple?"checkbox":"radio",name:e.id,value:r,checked:e.allowMultiple?(t||[]).includes(r):t===r,onChange:a=>{if(e.allowMultiple){let e=t||[];a.target.checked?s([...e,r]):s(e.filter(e=>e!==r))}else s(r)},className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300"}),(0,a.jsx)("span",{className:"ml-2 text-gray-700",children:r})]},l))});case"likert_scale":return(0,a.jsx)("div",{className:"space-y-4",children:(e.statements||[]).map((r,l)=>{var n,i;return(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:r}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:Array.from({length:((null===(n=e.scale)||void 0===n?void 0:n.max)||5)-((null===(i=e.scale)||void 0===i?void 0:i.min)||1)+1},(r,n)=>{var i;let o=((null===(i=e.scale)||void 0===i?void 0:i.min)||1)+n;return(0,a.jsxs)("label",{className:"flex flex-col items-center",children:[(0,a.jsx)("input",{type:"radio",name:"".concat(e.id,"_").concat(l),value:o,checked:(null==t?void 0:t[l])===o,onChange:e=>{let a={...t||{}};a[l]=parseInt(e.target.value),s(a)},className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300"}),(0,a.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:o})]},n)})})]},l)})});case"rating":return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[Array.from({length:(null===(r=e.scale)||void 0===r?void 0:r.max)||5},(e,r)=>(0,a.jsx)("button",{type:"button",onClick:()=>s(r+1),className:"text-2xl ".concat(t&&t>r?"text-yellow-400":"text-gray-300"," hover:text-yellow-400 transition-colors"),children:"⭐"},r)),t&&(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:[t," out of ",(null===(l=e.scale)||void 0===l?void 0:l.max)||5]})]});case"slider":return(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"range",min:e.min||0,max:e.max||100,step:e.step||1,value:t||e.defaultValue||50,onChange:e=>s(parseInt(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[(0,a.jsx)("span",{children:e.min||0}),(0,a.jsx)("span",{className:"font-medium",children:t||e.defaultValue||50}),(0,a.jsx)("span",{children:e.max||100})]})]});case"open_ended":return(0,a.jsx)("textarea",{value:t||"",onChange:e=>s(e.target.value),placeholder:e.placeholder||"Enter your response...",maxLength:e.maxLength||500,rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent resize-none"});case"dropdown":return(0,a.jsxs)("select",{value:t||"",onChange:e=>s(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:e.placeholder||"Select an option..."}),(e.options||[]).map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]});case"dichotomous":return(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:e.id,value:"yes",checked:"yes"===t,onChange:e=>s(e.target.value),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300"}),(0,a.jsx)("span",{className:"ml-2 text-gray-700",children:e.yesLabel||"Yes"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:e.id,value:"no",checked:"no"===t,onChange:e=>s(e.target.value),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300"}),(0,a.jsx)("span",{className:"ml-2 text-gray-700",children:e.noLabel||"No"})]})]});case"opinion_scale":return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:(null===(n=e.scale)||void 0===n?void 0:n.leftLabel)||"Strongly Disagree"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:(null===(i=e.scale)||void 0===i?void 0:i.rightLabel)||"Strongly Agree"})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:Array.from({length:((null===(o=e.scale)||void 0===o?void 0:o.max)||10)-((null===(c=e.scale)||void 0===c?void 0:c.min)||1)+1},(r,l)=>{var n;let i=((null===(n=e.scale)||void 0===n?void 0:n.min)||1)+l;return(0,a.jsxs)("label",{className:"flex flex-col items-center",children:[(0,a.jsx)("input",{type:"radio",name:e.id,value:i,checked:t===i,onChange:e=>s(parseInt(e.target.value)),className:"h-4 w-4 text-teachgage-blue focus:ring-teachgage-blue border-gray-300"}),(0,a.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:i})]},l)})})]});default:return(0,a.jsxs)("div",{className:"text-center py-4 text-gray-500",children:["Preview for ",e.type," questions coming soon"]})}}(e,n[e.id],t=>o(e.id,t))})]},e.id)),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{type:"submit",className:"inline-flex items-center px-8 py-3 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors font-medium",children:[(0,a.jsx)(D,{className:"h-5 w-5 mr-2"}),"Submit Survey"]})})]}),(0,a.jsx)("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 text-sm font-medium",children:"\uD83D\uDC41️"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Preview Mode"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"This is how your survey will appear to respondents. Responses entered here are not saved."})]})]})})]})]})}function Z(e){let{surveyId:t=null,initialData:s=null}=e,[l,n]=(0,r.useState)(s||{title:"Untitled Survey",description:"",questions:[]}),[i,d]=(0,r.useState)(null),[b,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)({}),[k,S]=(0,r.useState)(!1),q=(0,o.Dy)((0,o.VT)(o.we),(0,o.VT)(o.Lg,{coordinateGetter:c.is})),D=[{id:"multiple_choice",name:"Multiple Choice",icon:"☑️"},{id:"likert_scale",name:"Likert Scale",icon:"\uD83D\uDCCA"},{id:"rating",name:"Rating Scale",icon:"⭐"},{id:"slider",name:"Slider",icon:"\uD83C\uDF9A️"},{id:"open_ended",name:"Open Ended",icon:"\uD83D\uDCDD"},{id:"dropdown",name:"Dropdown",icon:"\uD83D\uDCCB"},{id:"matrix",name:"Matrix",icon:"\uD83D\uDD22"},{id:"rank_order",name:"Rank Order",icon:"\uD83D\uDD22"},{id:"dichotomous",name:"Yes/No",icon:"✅"},{id:"opinion_scale",name:"Opinion Scale",icon:"\uD83D\uDCAD"}],Z=(0,r.useCallback)(e=>{var t;let s={id:"q_".concat(Date.now()),type:e,question:"New ".concat(null===(t=D.find(t=>t.id===e))||void 0===t?void 0:t.name," Question"),required:!1,order:l.questions.length,...{multiple_choice:{options:["Option 1","Option 2","Option 3"],allowMultiple:!1},likert_scale:{statements:["Statement 1"],scale:{min:1,max:5,labels:["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"]}},rating:{scale:{min:1,max:5,step:1,labels:{1:"Poor",5:"Excellent"}}},slider:{min:0,max:100,step:1,defaultValue:50},open_ended:{placeholder:"Enter your response...",maxLength:500},dropdown:{options:["Option 1","Option 2","Option 3"],placeholder:"Select an option..."},matrix:{rows:["Row 1","Row 2"],columns:["Column 1","Column 2","Column 3"]},rank_order:{options:["Option 1","Option 2","Option 3","Option 4"]},dichotomous:{yesLabel:"Yes",noLabel:"No"},opinion_scale:{scale:{min:1,max:10,leftLabel:"Strongly Disagree",rightLabel:"Strongly Agree"}}}[e]||{}};n(e=>({...e,questions:[...e.questions,s]})),d(s.id),j(!1),p.ZP.success("Question added successfully!")},[l.questions.length]),L=(0,r.useCallback)((e,t)=>{n(s=>({...s,questions:s.questions.map(s=>s.id===e?{...s,...t}:s)}))},[]),M=(0,r.useCallback)(e=>{n(t=>({...t,questions:t.questions.filter(t=>t.id!==e)})),i===e&&d(null),p.ZP.success("Question deleted successfully!")},[i]),O=(0,r.useCallback)(e=>{let t=l.questions.find(t=>t.id===e);if(!t)return;let s={...t,id:"q_".concat(Date.now()),question:"".concat(t.question," (Copy)"),order:l.questions.length};n(e=>({...e,questions:[...e.questions,s]})),p.ZP.success("Question duplicated successfully!")},[l.questions]),A=(0,r.useCallback)(e=>{let{active:t,over:s}=e;t.id!==(null==s?void 0:s.id)&&n(e=>{let a=e.questions.findIndex(e=>e.id===t.id),r=e.questions.findIndex(e=>e.id===s.id),l=(0,c.Rp)(e.questions,a,r);return{...e,questions:l.map((e,t)=>({...e,order:t}))}})},[]),E=async()=>{S(!0);try{await new Promise(e=>setTimeout(e,1500)),p.ZP.success("Survey saved successfully!")}catch(e){p.ZP.error("Failed to save survey")}finally{S(!1)}},P=e=>{w(t=>({...t,[e]:!t[e]}))};return b?(0,a.jsx)(_,{survey:l,onClose:()=>y(!1),onEdit:()=>y(!1)}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("input",{type:"text",value:l.title,onChange:e=>n(t=>({...t,title:e.target.value})),className:"text-2xl font-bold text-gray-900 bg-transparent border-none focus:outline-none focus:ring-0 w-full",placeholder:"Survey Title"}),(0,a.jsx)("textarea",{value:l.description,onChange:e=>n(t=>({...t,description:e.target.value})),className:"mt-2 text-gray-600 bg-transparent border-none focus:outline-none focus:ring-0 w-full resize-none",placeholder:"Survey description (optional)",rows:2})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,a.jsxs)("button",{onClick:E,disabled:k,className:"flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors disabled:opacity-50",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),k?"Saving...":"Save Survey"]})]})]})}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:"flex-1 p-6",children:[(0,a.jsx)(o.LB,{sensors:q,collisionDetection:o.pE,onDragEnd:A,modifiers:[u,m],children:(0,a.jsx)(c.Fo,{items:l.questions.map(e=>e.id),strategy:c.qw,children:(0,a.jsx)("div",{className:"space-y-4",children:l.questions.map((e,t)=>(0,a.jsx)(C,{question:e,index:t,isActive:i===e.id,isCollapsed:N[e.id],onUpdate:L,onDelete:M,onDuplicate:O,onToggleCollapse:P,onSetActive:d},e.id))})})}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center px-6 py-3 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 mr-2"}),"Add Question"]})}),0===l.questions.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(h.Z,{className:"h-8 w-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No questions yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started by adding your first question"}),(0,a.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Add Your First Question"]})]})]}),v&&(0,a.jsx)(f,{questionTypes:D,onSelectType:Z,onClose:()=>j(!1)})]})]})}function L(){let{id:e}=(0,l.useRouter)().query,[t,s]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{if(e&&"new"!==e)try{await new Promise(e=>setTimeout(e,1e3)),s({id:e,title:"Course Evaluation Survey",description:"Please provide feedback on this course",questions:[{id:"q_1",type:"multiple_choice",question:"How would you rate this course overall?",required:!0,order:0,options:["Excellent","Good","Fair","Poor"],allowMultiple:!1},{id:"q_2",type:"likert_scale",question:"Please rate the following aspects:",required:!0,order:1,statements:["Course content quality","Instructor clarity","Course organization"],scale:{min:1,max:5,labels:["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"]}}]})}catch(e){console.error("Error loading survey:",e)}o(!1)})()},[e]),n)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading survey builder..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Survey Builder - TeachGage"}),(0,a.jsx)("meta",{name:"description",content:"Create and edit surveys with TeachGage's advanced survey builder"})]}),(0,a.jsx)(Z,{surveyId:"new"!==e?e:null,initialData:t})]})}},9008:function(e,t,s){e.exports=s(23867)}},function(e){e.O(0,[2579,2888,9774,179],function(){return e(e.s=22259)}),_N_E=e.O()}]);