(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8026],{91015:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(45642)}])},45642:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return L}});var a=t(85893),r=t(11163),l=t(67294),n=t(9008),i=t.n(n),c=t(28259),d=t(37363),o=t(41664),x=t.n(o),m=t(64017),h=t(32089),g=t(15452),u=t(89176),b=t(23488),j=t(50039),p=t(4270),v=t(23346),N=t(83989),f=t(60493);function y(e){let{onCreateCourse:s,onCreateSurvey:t}=e,{user:r,trialStatus:n,requiresSubscription:i}=(0,c.a)(),[d,o]=(0,l.useState)({courses:[],surveys:[],notifications:[],analytics:null,recentActivity:[]}),[y,w]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{(()=>{if(r){w(!0);try{let e=(0,m.sA)(r.id),s=[];e.forEach(e=>{let t=(0,m.aM)(e.id);s.push(...t)});let t=(0,m.Mq)(r.id),a=m.ut.instructorDashboard[r.id]||{totalCourses:e.length,activeSurveys:s.filter(e=>"active"===e.status).length,totalResponses:0,averageRating:null,responseRate:null,recentActivity:[]};o({courses:e,surveys:s,notifications:t.slice(0,5),analytics:a,recentActivity:a.recentActivity||[]})}catch(e){console.error("Failed to load dashboard data:",e)}finally{w(!1)}}})()},[r]),y)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teachgage-blue"})});let C=(()=>{let{courses:e,surveys:s,analytics:t}=d;return[{title:"Total Courses",value:e.length,icon:h.Z,color:"text-blue-600",bgColor:"bg-blue-100",change:null},{title:"Active Surveys",value:s.filter(e=>"active"===e.status).length,icon:g.Z,color:"text-green-600",bgColor:"bg-green-100",change:null},{title:"Total Responses",value:(null==t?void 0:t.totalResponses)||0,icon:u.Z,color:"text-purple-600",bgColor:"bg-purple-100",change:null},{title:"Average Rating",value:(null==t?void 0:t.averageRating)?"".concat(t.averageRating,"/5"):"N/A",icon:b.Z,color:"text-yellow-600",bgColor:"bg-yellow-100",change:null}]})();return(()=>{let{courses:e,surveys:s}=d,t=[];return e.forEach(e=>{let s=new Date(e.endDate),a=Math.ceil((s-new Date)/864e5);a>0&&a<=30&&t.push({type:"course",title:"".concat(e.title," ends"),date:s,daysUntil:a,urgent:a<=7})}),s.forEach(e=>{if("active"===e.status){let s=new Date(e.endDate),a=Math.ceil((s-new Date)/864e5);a>0&&a<=14&&t.push({type:"survey",title:"".concat(e.title," closes"),date:s,daysUntil:a,urgent:a<=3})}}),t.sort((e,s)=>e.daysUntil-s.daysUntil).slice(0,5)})(),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-teachgage-blue to-teachgage-medium-blue rounded-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:["Welcome back, ",null==r?void 0:r.firstName,"!"]}),(0,a.jsx)("p",{className:"text-teachgage-cream mt-1",children:(null==r?void 0:r.role)==="instructor"&&(null==r?void 0:r.organizationId)?"".concat(r.organizationName||"Organization"," Instructor"):(null==r?void 0:r.accountTier)==="basic"?"Basic Account":(null==r?void 0:r.accountTier)==="professional"?"Professional Account":"Instructor Account"})]}),n&&(n.isTrialActive||n.expired)&&(0,a.jsx)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("div",{className:"text-sm",children:n.expired?(0,a.jsx)("span",{className:"text-red-200",children:"Trial Expired"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{children:["Trial: ",n.daysRemaining," days left"]})})})]})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((e,s)=>{let t=e.icon;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg bg-gray-100",children:(0,a.jsx)(t,{className:"w-6 h-6 text-teachgage-blue"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-teachgage-navy",children:e.title}),(0,a.jsx)("p",{className:"text-2xl font-bold text-teachgage-blue",children:e.value})]})]})},s)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-teachgage-blue",children:"Recent Courses"}),(0,a.jsxs)("button",{onClick:s,className:"inline-flex items-center text-sm text-teachgage-orange hover:text-teachgage-blue",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"New Course"]})]})}),(0,a.jsx)("div",{className:"p-6",children:0===d.courses.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-teachgage-blue mb-2",children:"No courses yet"}),(0,a.jsx)("p",{className:"text-teachgage-navy mb-4",children:"Create your first course to get started."}),(0,a.jsxs)("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teachgage-blue hover:bg-teachgage-medium-blue",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Create Course"]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[d.courses.slice(0,3).map(e=>(0,a.jsx)(x(),{href:"/dashboard/courses/".concat(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-teachgage-blue",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-teachgage-navy",children:e.code}),(0,a.jsxs)("div",{className:"flex items-center mt-2 text-sm text-teachgage-navy",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),e.currentStudents,"/",e.maxStudents," students",(0,a.jsx)(v.Z,{className:"w-4 h-4 ml-4 mr-1"}),new Date(e.startDate).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-teachgage-green text-white":"draft"===e.status?"bg-gray-100 text-teachgage-navy":"bg-teachgage-orange text-white"),children:e.status}),(0,a.jsx)("div",{className:"p-1 text-teachgage-navy hover:text-teachgage-blue",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]})]})},e.id)),d.courses.length>3&&(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsxs)(x(),{href:"/dashboard/courses",className:"text-sm text-teachgage-blue hover:text-teachgage-orange",children:["View all ",d.courses.length," courses"]})})]})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-teachgage-blue",children:"Recent Surveys"}),(0,a.jsxs)("button",{onClick:t,className:"inline-flex items-center text-sm text-teachgage-orange hover:text-teachgage-blue",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-1"}),"New Survey"]})]})}),(0,a.jsx)("div",{className:"p-6",children:0===d.surveys.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(g.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-teachgage-blue mb-2",children:"No surveys yet"}),(0,a.jsx)("p",{className:"text-teachgage-navy mb-4",children:"Create your first survey to collect feedback."}),(0,a.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teachgage-blue hover:bg-teachgage-medium-blue",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Create Survey"]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[d.surveys.slice(0,3).map(e=>(0,a.jsx)(x(),{href:"/dashboard/feedback-forms/".concat(e.id),children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-medium text-teachgage-blue",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-teachgage-navy",children:e.courseName}),(0,a.jsxs)("div",{className:"flex items-center mt-2 text-sm text-teachgage-navy",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-1"}),e.totalResponses,"/",e.totalInvitations," responses",(0,a.jsx)(v.Z,{className:"w-4 h-4 ml-4 mr-1"}),new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-teachgage-green text-white":"draft"===e.status?"bg-gray-100 text-teachgage-navy":"bg-teachgage-orange text-white"),children:e.status}),(0,a.jsx)("div",{className:"p-1 text-teachgage-navy hover:text-teachgage-blue",children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})]})]})},e.id)),d.surveys.length>3&&(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsxs)(x(),{href:"/dashboard/feedback-forms",className:"text-sm text-teachgage-blue hover:text-teachgage-orange",children:["View all ",d.surveys.length," surveys"]})})]})})]})})]}),d.recentActivity.length>0&&(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-teachgage-blue",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.recentActivity.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-3 border border-gray-100 rounded-lg",children:[(0,a.jsx)("div",{className:"p-1 bg-teachgage-green rounded-full",children:(0,a.jsx)(f.Z,{className:"w-3 h-3 text-white"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-teachgage-blue",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-teachgage-navy",children:new Date(e.timestamp).toLocaleDateString()})]})]},s))})})]})})]})}var w=t(185),C=t(28562),Z=t(43283),k=t(12220),I=t(36127),A=t(86691),S=t(96815),z=t(37864),D=t(2553);function R(e){let{onCreateInstructor:s,onBulkUpload:t}=e,{user:n,trialStatus:i}=(0,c.a)(),d=(0,r.useRouter)(),[o,x]=(0,l.useState)(null),[g,b]=(0,l.useState)([]),[p,v]=(0,l.useState)([]),[N,y]=(0,l.useState)([]),[R,L]=(0,l.useState)(null),[_,E]=(0,l.useState)(""),[T,U]=(0,l.useState)("all"),[B,O]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n&&(()=>{if(null==n?void 0:n.organizationId){O(!0);try{let e=m.IR.find(e=>e.id===n.organizationId);x(e);let s=m.Ft.organizationInstructors.filter(e=>e.organizationId===n.organizationId);b(s);let t=m.W9.filter(e=>e.organizationId===n.organizationId);v(t);let a=m.dt.filter(e=>e.organizationId===n.organizationId);y(a);let r=m.ut.organizationDashboard[n.organizationId]||{totalInstructors:s.length,totalCourses:a.length,activeSurveys:0,totalResponses:0,departmentBreakdown:t.map(e=>({departmentId:e.id,name:e.name,instructors:s.filter(s=>s.departmentId===e.id).length,courses:a.filter(s=>s.departmentId===e.id).length,surveys:0}))};L(r)}catch(e){console.error("Failed to load organization data:",e)}finally{O(!1)}}})()},[n]);let F=g.filter(e=>{let s=""===_||e.firstName.toLowerCase().includes(_.toLowerCase())||e.lastName.toLowerCase().includes(_.toLowerCase())||e.email.toLowerCase().includes(_.toLowerCase()),t="all"===T||e.status===T;return s&&t}),M=e=>{d.push("/dashboard/organization/users/".concat(e.id,"/edit"))},P=e=>{window.confirm("Are you sure you want to remove ".concat(e.firstName," ").concat(e.lastName," from the organization?"))&&(b(s=>s.filter(s=>s.id!==e.id)),alert("".concat(e.firstName," ").concat(e.lastName," has been removed from the organization")))},V=e=>{alert("Welcome email sent to ".concat(e.email))};if(B)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});let W=[{title:"Total Instructors",value:g.length,icon:u.Z,color:"text-blue-600",bgColor:"bg-blue-100",change:"+2 this month"},{title:"Active Courses",value:N.filter(e=>"active"===e.status).length,icon:h.Z,color:"text-green-600",bgColor:"bg-green-100",change:"+5 this month"},{title:"Departments",value:p.length,icon:w.Z,color:"text-purple-600",bgColor:"bg-purple-100",change:null},{title:"Total Responses",value:(null==R?void 0:R.totalResponses)||0,icon:C.Z,color:"text-yellow-600",bgColor:"bg-yellow-100",change:null}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:[null==o?void 0:o.name," Dashboard"]}),(0,a.jsxs)("p",{className:"text-indigo-100 mt-1",children:["Organization Administrator • ",g.length," instructors"]})]}),i&&(i.isTrialActive||i.expired)&&(0,a.jsx)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),(0,a.jsx)("div",{className:"text-sm",children:i.expired?(0,a.jsx)("span",{className:"text-red-200",children:"Trial Expired"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{children:["Trial: ",i.daysRemaining," days left"]})})})]})})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:W.map((e,s)=>{let t=e.icon;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat(e.bgColor),children:(0,a.jsx)(t,{className:"w-6 h-6 ".concat(e.color)})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),e.change&&(0,a.jsx)("p",{className:"text-xs text-green-600",children:e.change})]})]})},s)})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Instructor Management"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:t,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Bulk Upload"]}),(0,a.jsxs)("button",{onClick:s,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Add Instructor"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(I.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search instructors...",value:_,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,a.jsx)("div",{className:"sm:w-48",children:(0,a.jsxs)("select",{value:T,onChange:e=>U(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending_password_change",children:"Pending Setup"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]})})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[0===F.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:_||"all"!==T?"No instructors found":"No instructors yet"}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:_||"all"!==T?"Try adjusting your search or filter criteria.":"Add your first instructor to get started."}),!_&&"all"===T&&(0,a.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,a.jsxs)("button",{onClick:s,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Add Instructor"]}),(0,a.jsxs)("button",{onClick:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-2"}),"Bulk Upload"]})]})]}):(0,a.jsx)("div",{className:"space-y-4",children:F.map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-5 h-5 text-gray-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email}),(0,a.jsxs)("div",{className:"flex items-center mt-1 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Department: ",(null===(s=p.find(s=>s.id===e.departmentId))||void 0===s?void 0:s.name)||"Unassigned"]}),e.lastLogin&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsxs)("span",{children:["Last login: ",new Date(e.lastLogin).toLocaleDateString()]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-100 text-green-800":"pending_password_change"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:["active"===e.status&&(0,a.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"pending_password_change"===e.status&&(0,a.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),"active"===e.status?"Active":"pending_password_change"===e.status?"Pending Setup":"Inactive"]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:["pending_password_change"===e.status&&(0,a.jsx)("button",{onClick:()=>V(e),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Resend Welcome Email",children:(0,a.jsx)(A.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>M(e),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"Edit Instructor",children:(0,a.jsx)(S.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>P(e),className:"p-1 text-gray-400 hover:text-red-500 transition-colors",title:"Remove Instructor",children:(0,a.jsx)(z.Z,{className:"w-4 h-4"})})]})]})]},e.id)})}),F.length>0&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("button",{onClick:()=>{d.push("/dashboard/organization/users")},className:"w-full text-center py-2 text-sm text-teachgage-blue hover:text-teachgage-orange transition-colors",children:["View All Users (",g.length,")"]})})]})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Department Breakdown"}),(0,a.jsx)("button",{onClick:()=>{d.push("/dashboard/organization/departments")},className:"text-xs text-teachgage-blue hover:text-teachgage-orange transition-colors",children:"View All"})]})}),(0,a.jsx)("div",{className:"p-4",children:0===p.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No departments configured"}):(0,a.jsx)("div",{className:"space-y-3",children:null==R?void 0:R.departmentBreakdown.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.instructors," instructors • ",e.courses," courses"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.surveys}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"surveys"})]})]},e.departmentId))})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-1 bg-green-100 rounded-full",children:(0,a.jsx)(k.Z,{className:"w-3 h-3 text-green-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:"Lisa Martinez was added to Mathematics department"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"2 hours ago"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"p-1 bg-blue-100 rounded-full",children:(0,a.jsx)(h.Z,{className:"w-3 h-3 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:'David Chen created "Software Engineering Principles"'}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"1 day ago"})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:"Quick Actions"})}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsxs)("button",{onClick:s,className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-3"}),"Add New Instructor"]}),(0,a.jsxs)("button",{onClick:t,className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:[(0,a.jsx)(Z.Z,{className:"w-4 h-4 mr-3"}),"Bulk Upload Instructors"]}),(0,a.jsxs)("button",{onClick:()=>{d.push("/dashboard/analytics")},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 mr-3"}),"View Organization Analytics"]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Name,Email,Department,Status,Last Login",...g.map(e=>{var s;return['"'.concat(e.firstName," ").concat(e.lastName,'"'),e.email,(null===(s=p.find(s=>s.id===e.departmentId))||void 0===s?void 0:s.name)||"Unassigned",e.status,e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"].join(",")})].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="organization-report-".concat(new Date().toISOString().split("T")[0],".csv"),t.click(),window.URL.revokeObjectURL(s),alert("Organization report exported successfully")},className:"w-full flex items-center px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md",children:[(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-3"}),"Export Reports"]})]})]})]})]})]})}function L(){let{user:e,isAuthenticated:s,isLoading:t}=(0,c.a)(),n=(0,r.useRouter)();if((0,l.useEffect)(()=>{t||s||n.push("/auth/signin")},[s,t,n]),t)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})});if(!s||!e)return null;let o="organization_admin"===e.role||"organizational"===e.accountTier;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Dashboard - TeachGage"}),(0,a.jsx)("meta",{name:"description",content:"TeachGage Dashboard"})]}),(0,a.jsx)(d.Z,{title:"Dashboard",children:o?(0,a.jsx)(R,{onCreateInstructor:()=>{n.push("/dashboard/organization/users/create")},onBulkUpload:()=>{n.push("/dashboard/organization/users?action=bulk-upload")}}):(0,a.jsx)(y,{onCreateCourse:()=>{n.push("/dashboard/courses/create")},onCreateSurvey:()=>{n.push("/dashboard/feedback-forms/create")}})})]})}}},function(e){e.O(0,[7005,2430,1820,7363,2888,9774,179],function(){return e(e.s=91015)}),_N_E=e.O()}]);