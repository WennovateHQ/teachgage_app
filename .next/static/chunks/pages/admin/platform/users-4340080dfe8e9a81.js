(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1670],{62162:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/platform/users",function(){return s(35865)}])},39889:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},50039:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},12779:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},96815:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4270:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},37864:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},43283:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},35865:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Z}});var a=s(85893),r=s(67294),n=s(11163),i=s(9008),l=s.n(i),c=s(96225),o=s(60493),d=s(50039),m=s(9475),u=s(8267),x=s(73416),g=s(36127),h=s(12779),p=s(43283),y=s(4270),f=s(86691),j=s(96815),N=s(37864),b=s(89176),v=s(39889),w=s(62190),k=s(86501);function Z(){let{action:e}=(0,n.useRouter)().query,[t,s]=(0,r.useState)([]),[i,w]=(0,r.useState)([]),[Z,S]=(0,r.useState)(""),[L,_]=(0,r.useState)("all"),[z,U]=(0,r.useState)("all"),[M,P]=(0,r.useState)("all"),[A,I]=(0,r.useState)(!0),[E,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{R(),"bulk-import"===e&&T(!0)},[e]),(0,r.useEffect)(()=>{let e=t;Z&&(e=e.filter(e=>{var t;return e.firstName.toLowerCase().includes(Z.toLowerCase())||e.lastName.toLowerCase().includes(Z.toLowerCase())||e.email.toLowerCase().includes(Z.toLowerCase())||(null===(t=e.organizationName)||void 0===t?void 0:t.toLowerCase().includes(Z.toLowerCase()))})),"all"!==L&&(e=e.filter(e=>e.role===L)),"all"!==z&&(e=e.filter(e=>e.status===z)),"all"!==M&&(e=e.filter(e=>e.organizationId===M)),w(e)},[t,Z,L,z,M]);let R=async()=>{try{await new Promise(e=>setTimeout(e,1e3)),s([{id:"user_1",firstName:"John",lastName:"Smith",email:"john.smith@stanford.edu",role:"instructor",status:"active",organizationId:"org_1",organizationName:"Stanford University",departmentName:"Computer Science",lastLogin:"2024-01-18T10:30:00Z",createdAt:"2023-08-15",courseCount:3,surveyCount:8},{id:"user_2",firstName:"Sarah",lastName:"Johnson",email:"sarah.johnson@mit.edu",role:"organization_admin",status:"active",organizationId:"org_2",organizationName:"MIT",departmentName:null,lastLogin:"2024-01-17T14:20:00Z",createdAt:"2023-09-22",courseCount:0,surveyCount:0},{id:"user_3",firstName:"Michael",lastName:"Brown",email:"michael.brown@techcorp.com",role:"instructor",status:"active",organizationId:"org_3",organizationName:"TechCorp Training",departmentName:"Engineering",lastLogin:"2024-01-16T09:45:00Z",createdAt:"2023-11-10",courseCount:2,surveyCount:5},{id:"user_4",firstName:"Emily",lastName:"Davis",email:"emily.davis@freelance.com",role:"instructor",status:"active",organizationId:null,organizationName:"Individual Account",departmentName:null,lastLogin:"2024-01-15T16:30:00Z",createdAt:"2024-01-05",courseCount:1,surveyCount:2},{id:"user_5",firstName:"David",lastName:"Wilson",email:"david.wilson@ccd.edu",role:"instructor",status:"pending",organizationId:"org_4",organizationName:"Community College District",departmentName:"Mathematics",lastLogin:null,createdAt:"2024-01-10",courseCount:0,surveyCount:0}])}catch(e){console.error("Error fetching users:",e),k.ZP.error("Failed to load users")}finally{I(!1)}},D=e=>{let t={active:{bg:"bg-green-100",text:"text-green-800",icon:o.Z},pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:d.Z},suspended:{bg:"bg-red-100",text:"text-red-800",icon:m.Z},inactive:{bg:"bg-gray-100",text:"text-gray-800",icon:m.Z}};return t[e]||t.inactive},O=e=>{let t={instructor:{bg:"bg-blue-100",text:"text-blue-800",icon:u.Z},organization_admin:{bg:"bg-purple-100",text:"text-purple-800",icon:x.Z},platform_admin:{bg:"bg-red-100",text:"text-red-800",icon:x.Z}};return t[e]||t.instructor},B=e=>{console.log("Edit user:",e),(0,k.ZP)("User edit functionality coming soon")},F=e=>{confirm("Are you sure you want to delete this user?")&&(s(t=>t.filter(t=>t.id!==e)),k.ZP.success("User deleted successfully"))},q=e=>{k.ZP.success("Invitation sent successfully")},V=e=>e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",H=[...new Set(t.map(e=>({id:e.organizationId,name:e.organizationName})))].filter(e=>e.id);return A?(0,a.jsx)(c.Z,{title:"User Management",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"User Management - TeachGage Admin"}),(0,a.jsx)("meta",{name:"description",content:"Manage platform users and their settings"})]}),(0,a.jsxs)(c.Z,{title:"User Management",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-gray-400 absolute left-3 top-2.5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users...",value:Z,onChange:e=>S(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent w-64"})]}),(0,a.jsxs)("select",{value:L,onChange:e=>_(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"instructor",children:"Instructor"}),(0,a.jsx)("option",{value:"organization_admin",children:"Organization Admin"}),(0,a.jsx)("option",{value:"platform_admin",children:"Platform Admin"})]}),(0,a.jsxs)("select",{value:z,onChange:e=>U(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,a.jsxs)("select",{value:M,onChange:e=>P(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Organizations"}),H.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Name,Email,Role,Status,Organization,Department,Courses,Surveys,Last Login",...i.map(e=>['"'.concat(e.firstName," ").concat(e.lastName,'"'),e.email,e.role,e.status,'"'.concat(e.organizationName||"",'"'),'"'.concat(e.departmentName||"",'"'),e.courseCount,e.surveyCount,e.lastLogin?new Date(e.lastLogin).toLocaleDateString():"Never"].join(","))].join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="platform-users.csv",s.click(),window.URL.revokeObjectURL(t),k.ZP.success("Users exported successfully")},className:"flex items-center px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,a.jsxs)("button",{onClick:()=>{T(!0)},className:"flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Bulk Import"]}),(0,a.jsxs)("button",{onClick:()=>(0,k.ZP)("Create user functionality coming soon"),className:"flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"New User"]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role & Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>{let t=D(e.status),s=O(e.role),r=t.icon,n=s.icon;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-teachgage-blue flex items-center justify-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium text-white",children:[e.firstName[0],e.lastName[0]]})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(s.bg," ").concat(s.text),children:[(0,a.jsx)(n,{className:"w-3 h-3 mr-1"}),e.role.replace("_"," ")]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(t.bg," ").concat(t.text),children:[(0,a.jsx)(r,{className:"w-3 h-3 mr-1"}),e.status]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.organizationName}),e.departmentName&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.departmentName})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{children:[e.courseCount," courses"]}),(0,a.jsxs)("div",{children:[e.surveyCount," surveys"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V(e.lastLogin)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:["pending"===e.status&&(0,a.jsx)("button",{onClick:()=>q(e.id),className:"text-teachgage-blue hover:text-teachgage-medium-blue",title:"Send invitation",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>B(e.id),className:"text-gray-600 hover:text-gray-900",title:"Edit user",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>F(e.id),className:"text-red-600 hover:text-red-900",title:"Delete user",children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),0===i.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:Z||"all"!==L||"all"!==z||"all"!==M?"Try adjusting your search or filter criteria":"Get started by creating your first user"})]}),(0,a.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-green-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"active"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Active Users"})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"organization_admin"===e.role).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Organization Admins"})]})]})}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.Z,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(e=>"pending"===e.status).length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pending Users"})]})]})})]}),E&&(0,a.jsx)(C,{onClose:()=>T(!1),onSuccess:()=>{T(!1),R()}})]})]})}function C(e){let{onClose:t,onSuccess:s}=e,[n,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),o=async()=>{if(!n){k.ZP.error("Please select a file first");return}c(!0);try{await new Promise(e=>setTimeout(e,2e3)),k.ZP.success("Users imported successfully!"),s()}catch(e){console.error("Upload error:",e),k.ZP.error("Failed to import users. Please try again.")}finally{c(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Bulk Import Users"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(w.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("button",{onClick:()=>{let e=new Blob(["firstName,lastName,email,role,organizationId,departmentName\nJohn,Doe,john.doe@example.com,instructor,org_1,Computer Science\nJane,Smith,jane.smith@example.com,organization_admin,org_1,"],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="user-import-template.csv",s.click(),window.URL.revokeObjectURL(t)},className:"text-sm text-teachgage-blue hover:text-teachgage-medium-blue underline",children:"Download CSV template"})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select CSV File"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{let t=e.target.files[0];t&&"text/csv"===t.type?i(t):k.ZP.error("Please select a valid CSV file")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent"})]}),n&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-green-800",children:["Selected: ",n.name," (",(n.size/1024).toFixed(1)," KB)"]})})]}),(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:t,disabled:l,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),(0,a.jsx)("button",{onClick:o,disabled:!n||l,className:"inline-flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Importing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Import Users"]})})]})})]})})}}},function(e){e.O(0,[7005,7185,2888,9774,179],function(){return e(e.s=62162)}),_N_E=e.O()}]);