(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{2767:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/platform/pipelines",function(){return s(5442)}])},43765:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},50039:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7571:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},45062:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(63759).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},5442:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(85893),r=s(67294),i=s(9008),n=s.n(i),l=s(96225),c=s(60887),d=s(45587),o=s(45062),u=s(60493),m=s(43765),g=s(4270),x=s(86501),h=s(7571),p=s(24285),v=s(50039),f=s(39200),y=s(8267),j=s(61929),b=s(30300),N=s(23346);function w(e){let{evaluation:t,isDragging:s=!1,onUpdate:r,onDelete:i}=e,{attributes:n,listeners:l,setNodeRef:c,transform:o,transition:m,isDragging:g}=(0,d.nB)({id:t.id}),x={transform:p.ux.Transform.toString(o),transition:m,opacity:g||s?.5:1},h=new Date(t.dueDate)<new Date&&"completed"!==t.status,w={active:(0,a.jsx)(v.Z,{className:"h-4 w-4 text-blue-500"}),completed:(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-500"}),overdue:(0,a.jsx)(f.Z,{className:"h-4 w-4 text-red-500"})};return(0,a.jsx)("div",{ref:c,style:x,className:"bg-white rounded-lg border-l-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer ".concat({high:"border-red-400 bg-red-50",medium:"border-yellow-400 bg-yellow-50",low:"border-green-400 bg-green-50"}[t.priority]||"border-gray-400 bg-gray-50"," ").concat(g?"rotate-3 scale-105":""),children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm leading-tight mb-1",children:t.courseName}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{children:t.instructor})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[(0,a.jsx)("button",{...n,...l,className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:(0,a.jsx)(j.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 mb-1",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[t.progress,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(100===t.progress?"bg-green-500":t.progress>=50?"bg-blue-500":"bg-yellow-500"),style:{width:"".concat(t.progress,"%")}})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,a.jsx)(N.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsx)("span",{className:h?"text-red-600 font-medium":"",children:new Date(t.dueDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full font-medium ".concat("high"===t.priority?"bg-red-100 text-red-700":"medium"===t.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:t.priority}),h?w.overdue:w[t.status]||w.active]})]}),h&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),(0,a.jsxs)("span",{children:["Overdue by ",Math.ceil((new Date-new Date(t.dueDate))/864e5)," days"]})]})})]})})}function D(e){let{stage:t,evaluations:s,onAddEvaluation:r,onUpdateEvaluation:i,onDeleteEvaluation:n}=e,{setNodeRef:l}=(0,c.Zj)({id:t.id});return(0,a.jsxs)("div",{className:"w-80 bg-gray-100 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(t.color," mr-2")}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:t.name}),(0,a.jsx)("span",{className:"ml-2 bg-gray-200 text-gray-600 text-xs px-2 py-1 rounded-full",children:s.length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:()=>r(t.id),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",title:"Add evaluation",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",children:(0,a.jsx)(h.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{ref:l,className:"min-h-[200px] space-y-3",children:[(0,a.jsx)(d.Fo,{items:s.map(e=>e.id),strategy:d.qw,children:s.map(e=>(0,a.jsx)(w,{evaluation:e,onUpdate:i,onDelete:n},e.id))}),0===s.length&&(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,a.jsxs)("div",{className:"bg-gray-200 rounded-lg p-4 border-2 border-dashed border-gray-300",children:[(0,a.jsx)("p",{className:"text-sm",children:"No evaluations in this stage"}),(0,a.jsx)("button",{onClick:()=>r(t.id),className:"mt-2 text-teachgage-blue hover:text-teachgage-medium-blue text-sm font-medium",children:"Add first evaluation"})]})})]})]})}function _(e){let{pipelineId:t}=e,[s,i]=(0,r.useState)({id:t,name:"Standard Evaluation Pipeline",stages:[{id:"stage_1",name:"Planning",color:"bg-blue-500",order:0,evaluations:[{id:"evaluation_1",courseId:"course_1",courseName:"Introduction to Psychology",instructor:"Dr. Sarah Johnson",currentStage:"stage_1",progress:10,dueDate:"2024-02-15",status:"active",priority:"high",lastUpdated:"2024-01-10T10:30:00Z"},{id:"evaluation_2",courseId:"course_2",courseName:"Advanced Mathematics",instructor:"Prof. Michael Chen",currentStage:"stage_1",progress:25,dueDate:"2024-02-20",status:"active",priority:"medium",lastUpdated:"2024-01-12T14:15:00Z"}]},{id:"stage_2",name:"Survey Creation",color:"bg-yellow-500",order:1,evaluations:[{id:"evaluation_3",courseId:"course_3",courseName:"Digital Marketing",instructor:"Dr. Emily Rodriguez",currentStage:"stage_2",progress:45,dueDate:"2024-02-18",status:"active",priority:"high",lastUpdated:"2024-01-14T09:20:00Z"}]},{id:"stage_3",name:"Data Collection",color:"bg-orange-500",order:2,evaluations:[{id:"evaluation_4",courseId:"course_4",courseName:"Software Engineering",instructor:"Dr. James Wilson",currentStage:"stage_3",progress:70,dueDate:"2024-02-12",status:"active",priority:"medium",lastUpdated:"2024-01-15T16:45:00Z"},{id:"evaluation_5",courseId:"course_5",courseName:"Data Science Fundamentals",instructor:"Prof. Lisa Anderson",currentStage:"stage_3",progress:65,dueDate:"2024-02-25",status:"active",priority:"low",lastUpdated:"2024-01-16T11:30:00Z"}]},{id:"stage_4",name:"Analysis",color:"bg-purple-500",order:3,evaluations:[{id:"evaluation_6",courseId:"course_6",courseName:"Business Analytics",instructor:"Dr. Robert Taylor",currentStage:"stage_4",progress:85,dueDate:"2024-02-10",status:"active",priority:"high",lastUpdated:"2024-01-17T13:20:00Z"}]},{id:"stage_5",name:"Completed",color:"bg-green-500",order:4,evaluations:[{id:"evaluation_7",courseId:"course_7",courseName:"Web Development",instructor:"Dr. Maria Garcia",currentStage:"stage_5",progress:100,dueDate:"2024-01-30",status:"completed",priority:"medium",lastUpdated:"2024-01-18T10:15:00Z"}]}]}),[n,l]=(0,r.useState)(null),[h,p]=(0,r.useState)(null),v=(0,c.Dy)((0,c.VT)(c.we),(0,c.VT)(c.Lg,{coordinateGetter:d.is})),f=(0,r.useCallback)(e=>{let{active:t}=e;l(t.id),p(N(t.id))},[]),y=(0,r.useCallback)(e=>{let{active:t,over:s}=e;if(!s)return;let a=t.id,r=s.id,n=b(a),l=b(r);n&&l&&n!==l&&i(e=>{let t=e.stages.find(e=>e.id===n),s=e.stages.find(e=>e.id===l);if(!t||!s)return e;let r=t.evaluations.find(e=>e.id===a);if(!r)return e;let i=t.evaluations.filter(e=>e.id!==a),c={...r,currentStage:s.id,lastUpdated:new Date().toISOString()},d=[...s.evaluations,c];return{...e,stages:e.stages.map(e=>e.id===n?{...e,evaluations:i}:e.id===l?{...e,evaluations:d}:e)}})},[]),j=(0,r.useCallback)(e=>{let{active:t,over:a}=e;if(!a){l(null),p(null);return}let r=t.id,n=a.id,c=b(r),o=b(n);if(!c||!o){l(null),p(null);return}if(c===o&&i(e=>{let t=e.stages.find(e=>e.id===c);if(!t)return e;let s=t.evaluations.findIndex(e=>e.id===r),a=t.evaluations.findIndex(e=>e.id===n);if(s!==a){let r=(0,d.Rp)(t.evaluations,s,a);return{...e,stages:e.stages.map(e=>e.id===c?{...e,evaluations:r}:e)}}return e}),l(null),p(null),c!==o){let e=s.stages.find(e=>e.id===o);x.ZP.success("Evaluation moved to ".concat(null==e?void 0:e.name))}},[s.stages]),b=(0,r.useCallback)(e=>{var t;return s.stages.find(t=>t.id===e)?e:null===(t=s.stages.find(t=>t.evaluations.some(t=>t.id===e)))||void 0===t?void 0:t.id},[s.stages]),N=(0,r.useCallback)(e=>{for(let t of s.stages){let s=t.evaluations.find(t=>t.id===e);if(s)return s}return null},[s.stages]),_=(0,r.useCallback)(e=>{let t={id:"evaluation_".concat(Date.now()),courseId:"course_".concat(Date.now()),courseName:"New Course Evaluation",instructor:"Instructor Name",currentStage:e,progress:0,dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],status:"active",priority:"medium",lastUpdated:new Date().toISOString()};i(s=>({...s,stages:s.stages.map(s=>s.id===e?{...s,evaluations:[...s.evaluations,t]}:s)})),x.ZP.success("New evaluation added!")},[]),S=(0,r.useCallback)((e,t)=>{i(s=>({...s,stages:s.stages.map(s=>({...s,evaluations:s.evaluations.map(s=>s.id===e?{...s,...t,lastUpdated:new Date().toISOString()}:s)}))}))},[]),Z=(0,r.useCallback)(e=>{i(t=>({...t,stages:t.stages.map(t=>({...t,evaluations:t.evaluations.filter(t=>t.id!==e)}))})),x.ZP.success("Evaluation deleted!")},[]);return(0,a.jsxs)("div",{className:"h-full bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage course evaluations through their lifecycle"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-1 text-green-500"}),(0,a.jsxs)("span",{children:[k("active")," Active"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-1 text-blue-500"}),(0,a.jsxs)("span",{children:[k("completed")," Completed"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1 text-red-500"}),(0,a.jsxs)("span",{children:[function(){let e=new Date().toISOString().split("T")[0];return s.stages.reduce((t,s)=>t+s.evaluations.filter(t=>"active"===t.status&&t.dueDate<e).length,0)}()," Overdue"]})]})]}),(0,a.jsxs)("button",{className:"flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"New Evaluation"]})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-6 overflow-x-auto",children:(0,a.jsxs)(c.LB,{sensors:v,collisionDetection:c.pE,onDragStart:f,onDragOver:y,onDragEnd:j,children:[(0,a.jsx)("div",{className:"flex space-x-6 min-w-max",children:s.stages.map(e=>(0,a.jsx)(D,{stage:e,evaluations:e.evaluations,onAddEvaluation:_,onUpdateEvaluation:S,onDeleteEvaluation:Z},e.id))}),(0,a.jsx)(c.y9,{children:n&&h?(0,a.jsx)(w,{evaluation:h,isDragging:!0,onUpdate:()=>{},onDelete:()=>{}}):null})]})})]});function k(e){return s.stages.reduce((t,s)=>t+s.evaluations.filter(t=>t.status===e).length,0)}}function S(){let[e,t]=(0,r.useState)("pipeline_1"),[s]=(0,r.useState)([{id:"pipeline_1",name:"Standard Evaluation Pipeline"},{id:"pipeline_2",name:"Mid-Semester Review Pipeline"},{id:"pipeline_3",name:"Final Assessment Pipeline"}]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"Pipeline Management - TeachGage Admin"}),(0,a.jsx)("meta",{name:"description",content:"Manage evaluation pipelines and workflows"})]}),(0,a.jsx)(l.Z,{title:"Pipeline Management",children:(0,a.jsxs)("div",{className:"h-full",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Pipeline:"}),(0,a.jsx)("select",{value:e,onChange:e=>t(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 h-[calc(100vh-200px)]",children:(0,a.jsx)(_,{pipelineId:e})})]})})]})}}},function(e){e.O(0,[7005,2579,8848,2888,9774,179],function(){return e(e.s=2767)}),_N_E=e.O()}]);