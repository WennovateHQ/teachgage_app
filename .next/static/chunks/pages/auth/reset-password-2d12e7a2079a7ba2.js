(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3035],{26742:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/reset-password",function(){return t(50632)}])},43765:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},60493:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},43832:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},15928:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},60641:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},82126:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(63759).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},50632:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(85893),r=t(67294),n=t(11163),c=t(9008),l=t.n(c),o=t(41664),d=t.n(o),i=t(60641),h=t(43765),u=t(92761),x=t(60493),m=t(82126),p=t(43832),g=t(15928);function w(){let{token:e}=(0,n.useRouter)().query,[s,t]=(0,r.useState)({password:"",confirmPassword:""}),[c,o]=(0,r.useState)(!1),[w,f]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1),[b,N]=(0,r.useState)(!0),[v,k]=(0,r.useState)(!1),[P,Z]=(0,r.useState)(""),[S,C]=(0,r.useState)({}),[R,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&_()},[e]);let _=async()=>{try{(await fetch("/api/auth/validate-reset-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})).ok?T(!0):Z("Invalid or expired reset link")}catch(e){console.error("Token validation error:",e),Z("Failed to validate reset link")}finally{N(!1)}},E=e=>{let t={};return e.length<8?t.password="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e)||(t.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"),s.confirmPassword&&e!==s.confirmPassword&&(t.confirmPassword="Passwords do not match"),t},z=e=>{let{name:a,value:r}=e.target;if(t(e=>({...e,[a]:r})),S[a]&&C(e=>({...e,[a]:""})),"password"===a){let e=E(r);C(s=>({...s,...e}))}"confirmPassword"===a&&s.password&&(r!==s.password?C(e=>({...e,confirmPassword:"Passwords do not match"})):C(e=>({...e,confirmPassword:""})))},F=async t=>{t.preventDefault(),j(!0),Z("");let a=E(s.password);if(s.password!==s.confirmPassword&&(a.confirmPassword="Passwords do not match"),Object.keys(a).length>0){C(a),j(!1);return}try{let t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,password:s.password})}),a=await t.json();t.ok?k(!0):Z(a.message||"Failed to reset password")}catch(e){console.error("Reset password error:",e),Z("Network error. Please try again.")}finally{j(!1)}};return b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Reset Password - TeachGage"})}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 animate-spin mx-auto text-teachgage-blue"}),(0,a.jsx)("p",{className:"mt-2 text-teachgage-navy",children:"Validating reset link..."})]})})]}):R?v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Password Reset Successful - TeachGage"})}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-teachgage-green rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-white"})}),(0,a.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-teachgage-blue",children:"Password Reset Successful"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-teachgage-navy",children:"Your password has been successfully reset. You can now sign in with your new password."})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(d(),{href:"/auth/signin",children:(0,a.jsx)("button",{className:"w-full flex justify-center py-2 px-4 bg-teachgage-blue text-white rounded-md hover:bg-teachgage-medium-blue transition-colors",children:"Sign In Now"})})})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:"Reset Password - TeachGage"}),(0,a.jsx)("meta",{name:"description",content:"Set your new TeachGage password"})]}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-teachgage-blue",children:"Reset Your Password"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-teachgage-navy",children:"Enter your new password below"})]}),(0,a.jsx)("div",{className:"bg-white py-8 px-6 shadow-lg rounded-lg",children:(0,a.jsxs)("form",{className:"space-y-6",onSubmit:F,children:[P&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-red-400"}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-800",children:P})})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-teachgage-navy",children:"New Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:s.password,onChange:z,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border ".concat(S.password?"border-red-300":"border-gray-300"," placeholder-gray-500 text-teachgage-navy rounded-md focus:outline-none focus:ring-teachgage-blue focus:border-teachgage-blue focus:z-10 sm:text-sm"),placeholder:"Enter new password"}),(0,a.jsx)(m.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>o(!c),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:c?(0,a.jsx)(p.Z,{className:"h-4 w-4"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"})})]}),S.password&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.password}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters with uppercase, lowercase, and number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-teachgage-navy",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"mt-1 relative",children:[(0,a.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:w?"text":"password",required:!0,value:s.confirmPassword,onChange:z,className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border ".concat(S.confirmPassword?"border-red-300":"border-gray-300"," placeholder-gray-500 text-teachgage-navy rounded-md focus:outline-none focus:ring-teachgage-blue focus:border-teachgage-blue focus:z-10 sm:text-sm"),placeholder:"Confirm new password"}),(0,a.jsx)(m.Z,{className:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"}),(0,a.jsx)("button",{type:"button",onClick:()=>f(!w),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:w?(0,a.jsx)(p.Z,{className:"h-4 w-4"}):(0,a.jsx)(g.Z,{className:"h-4 w-4"})})]}),S.confirmPassword&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:S.confirmPassword})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:y||Object.keys(S).some(e=>S[e]),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-teachgage-blue hover:bg-teachgage-medium-blue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teachgage-blue disabled:opacity-50 disabled:cursor-not-allowed",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Resetting Password..."]}):"Reset Password"})})]})})]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"Invalid Reset Link - TeachGage"})}),(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-8 w-8 text-red-600"})}),(0,a.jsx)("h2",{className:"mt-6 text-3xl font-extrabold text-teachgage-blue",children:"Invalid Reset Link"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-teachgage-navy",children:P||"This password reset link is invalid or has expired."})]}),(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)(d(),{href:"/auth/forgot-password",children:(0,a.jsx)("button",{className:"w-full flex justify-center py-2 px-4 bg-teachgage-blue text-white rounded-md hover:bg-teachgage-medium-blue transition-colors",children:"Request New Reset Link"})}),(0,a.jsx)(d(),{href:"/auth/signin",children:(0,a.jsxs)("button",{className:"w-full flex justify-center items-center py-2 px-4 border border-teachgage-blue text-teachgage-blue rounded-md hover:bg-teachgage-blue hover:text-white transition-colors",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})})]})]})})]})}},11163:function(e,s,t){e.exports=t(43079)}},function(e){e.O(0,[7005,2888,9774,179],function(){return e(e.s=26742)}),_N_E=e.O()}]);