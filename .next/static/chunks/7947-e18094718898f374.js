"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7947],{16319:function(e,a,s){s.d(a,{Z:function(){return k}});var t=s(85893),r=s(67294),n=s(28562),i=s(47935),l=s(70088),c=s(89176),o=s(32089),d=s(86501),m=s(52217),x=s(90437),h=s(39810);function g(e){var a;let{metrics:s}=e,r=[{title:"Total Responses",value:(null===(a=s.totalResponses)||void 0===a?void 0:a.toLocaleString())||"0",change:"+".concat(s.participationGrowth||0,"%"),changeType:"positive",icon:c.Z,color:"bg-blue-500"},{title:"Average Rating",value:"".concat(s.averageRating||0,"/5.0"),change:"+".concat(s.satisfactionTrend||0,"%"),changeType:"positive",icon:l.Z,color:"bg-yellow-500"},{title:"Response Rate",value:"".concat(s.responseRate||0,"%"),change:"+5.2%",changeType:"positive",icon:m.Z,color:"bg-green-500"},{title:"Active Courses",value:s.totalCourses||"0",change:"+12%",changeType:"positive",icon:o.Z,color:"bg-purple-500"}];return(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((e,a)=>{let s=e.icon;return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value})]}),(0,t.jsx)("div",{className:"p-3 rounded-full ".concat(e.color),children:(0,t.jsx)(s,{className:"h-6 w-6 text-white"})})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,t.jsxs)("span",{className:"text-sm font-medium flex items-center ".concat("positive"===e.changeType?"text-green-600":"text-red-600"),children:["positive"===e.changeType?(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-1"}):(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),e.change]}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"vs last period"})]})]},a)})})}function p(e){let{data:a,metric:s}=e,n=(0,r.useMemo)(()=>a&&Array.isArray(a)?a.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),value:e[s]||0})):[],[a,s]),i=(0,r.useMemo)(()=>Math.max(...n.map(e=>e.value),1),[n]),l=e=>({responses:"Responses",averageRating:"Avg Rating",responseRate:"Response Rate (%)"})[e]||e,c=e=>({responses:"stroke-blue-500 fill-blue-100",averageRating:"stroke-yellow-500 fill-yellow-100",responseRate:"stroke-green-500 fill-green-100"})[e]||"stroke-gray-500 fill-gray-100";return n.length?(0,t.jsxs)("div",{className:"h-64","data-chart":"trend-chart",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:[l(s)," Over Time"]})}),(0,t.jsx)("div",{className:"relative h-48",children:(0,t.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 200",children:[(0,t.jsx)("defs",{children:(0,t.jsx)("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:(0,t.jsx)("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#f3f4f6",strokeWidth:"1"})})}),(0,t.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),(0,t.jsxs)("g",{transform:"translate(40, 20)",children:[[0,.25,.5,.75,1].map((e,a)=>{let r=160-160*e,n=Math.round(i*e);return(0,t.jsxs)("g",{children:[(0,t.jsx)("line",{x1:"0",y1:r,x2:"320",y2:r,stroke:"#e5e7eb",strokeWidth:"1"}),(0,t.jsx)("text",{x:"-5",y:r+4,textAnchor:"end",className:"text-xs fill-gray-500",children:"averageRating"===s?n.toFixed(1):n})]},a)}),n.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("path",{d:"M 0 160 ".concat(n.map((e,a)=>{let s=a/(n.length-1)*320,t=160-e.value/i*160;return"L ".concat(s," ").concat(t)}).join(" ")," L 320 160 Z"),className:c(s).split(" ")[1],fillOpacity:"0.3"}),(0,t.jsx)("path",{d:"M ".concat(n.map((e,a)=>{let s=a/(n.length-1)*320,t=160-e.value/i*160;return"".concat(0===a?"M":"L"," ").concat(s," ").concat(t)}).join(" ")),className:c(s).split(" ")[0],strokeWidth:"2",fill:"none"}),n.map((e,a)=>{let r=a/(n.length-1)*320,l=160-e.value/i*160;return(0,t.jsxs)("g",{children:[(0,t.jsx)("circle",{cx:r,cy:l,r:"4",className:c(s).split(" ")[0],fill:"white",strokeWidth:"2"}),(0,t.jsx)("circle",{cx:r,cy:l,r:"8",fill:"transparent",className:"hover:fill-black hover:fill-opacity-10 cursor-pointer",children:(0,t.jsx)("title",{children:"".concat(e.date,": ").concat(e.value)})})]},a)})]}),n.map((e,a)=>{if(a%Math.ceil(n.length/5)==0){let s=a/(n.length-1)*320;return(0,t.jsx)("text",{x:s,y:"180",textAnchor:"middle",className:"text-xs fill-gray-500",children:e.date},a)}return null})]})]})}),(0,t.jsx)("div",{className:"flex items-center justify-center mt-2",children:(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full mr-2 ".concat(c(s).split(" ")[0].replace("stroke-","bg-"))}),l(s)]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDCCA"}),(0,t.jsx)("p",{children:"No trend data available"})]})})}function u(e){let{data:a}=e;if(!a||!Array.isArray(a))return(0,t.jsx)("div",{className:"flex items-center justify-center h-48 text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"⏰"}),(0,t.jsx)("p",{children:"No response rate data available"})]})});let s=Math.max(...a.map(e=>e.rate),100);return(0,t.jsxs)("div",{className:"h-48","data-chart":"response-rate-chart",children:[(0,t.jsx)("div",{className:"flex items-end justify-between h-40 px-2",children:a.map((e,a)=>{let r=e.rate/s*100;return(0,t.jsxs)("div",{className:"flex flex-col items-center flex-1 mx-1",children:[(0,t.jsx)("div",{className:"relative w-full",children:(0,t.jsx)("div",{className:"bg-teachgage-blue rounded-t transition-all duration-500 hover:bg-teachgage-medium-blue cursor-pointer",style:{height:"".concat(1.6*r,"px")},title:"".concat(e.hour,": ").concat(e.rate,"% response rate"),children:(0,t.jsxs)("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs font-medium text-gray-700 opacity-0 hover:opacity-100 transition-opacity",children:[e.rate,"%"]})})}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-2 transform -rotate-45 origin-center",children:e.hour})]},a)})}),(0,t.jsxs)("div",{className:"absolute left-0 top-0 h-40 flex flex-col justify-between text-xs text-gray-500 -ml-8",children:[(0,t.jsx)("span",{children:"100%"}),(0,t.jsx)("span",{children:"75%"}),(0,t.jsx)("span",{children:"50%"}),(0,t.jsx)("span",{children:"25%"}),(0,t.jsx)("span",{children:"0%"})]})]})}function f(e){let{data:a}=e;if(!a||!Array.isArray(a))return(0,t.jsx)("div",{className:"flex items-center justify-center h-48 text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"\uD83D\uDD25"}),(0,t.jsx)("p",{children:"No heatmap data available"})]})});let s=[...new Set(a.map(e=>e.course))],r=[...new Set(a.map(e=>e.week))].sort((e,a)=>e-a),n=(e,s)=>{let t=a.find(a=>a.course===e&&a.week===s);return t?t.rating/5:0},i=(e,s)=>{let t=a.find(a=>a.course===e&&a.week===s);return t?t.responses:0},l=e=>0===e?"bg-gray-100":e<.6?"bg-red-200":e<.7?"bg-yellow-200":e<.8?"bg-green-200":e<.9?"bg-green-300":"bg-green-400";return(0,t.jsx)("div",{className:"overflow-x-auto","data-chart":"performance-heatmap",children:(0,t.jsxs)("div",{className:"min-w-max",children:[(0,t.jsxs)("div",{className:"flex mb-2",children:[(0,t.jsx)("div",{className:"w-24 text-sm font-medium text-gray-700 py-2",children:"Course"}),r.map(e=>(0,t.jsxs)("div",{className:"w-20 text-center text-sm font-medium text-gray-700 py-2",children:["Week ",e]},e))]}),(0,t.jsx)("div",{className:"space-y-1",children:s.map(e=>(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("div",{className:"w-24 text-sm text-gray-900 py-3 pr-4 font-medium",children:e}),r.map(s=>{var r;let c=n(e,s),o=i(e,s),d=(null===(r=a.find(a=>a.course===e&&a.week===s))||void 0===r?void 0:r.rating)||0;return(0,t.jsx)("div",{className:"w-20 h-12 border border-gray-200 flex items-center justify-center text-xs font-medium cursor-pointer transition-all hover:scale-105 hover:shadow-md ".concat(l(c)),title:"".concat(e," - Week ").concat(s,"\nRating: ").concat(d,"/5.0\nResponses: ").concat(o),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-bold",children:d.toFixed(1)}),(0,t.jsx)("div",{className:"text-xs text-gray-600",children:o})]})},"".concat(e,"-").concat(s))})]},e))}),(0,t.jsx)("div",{className:"mt-6 flex items-center justify-center space-x-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Rating:"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-red-200 border border-gray-300"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Low"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-yellow-200 border border-gray-300"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Fair"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-200 border border-gray-300"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Good"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-green-400 border border-gray-300"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Excellent"})]})]})}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:(a.reduce((e,a)=>e+a.rating,0)/a.length).toFixed(1)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Rating"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:a.reduce((e,a)=>e+a.responses,0)}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Total Responses"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900",children:s.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Courses Tracked"})]})]})]})})}var j=s(2553),v=s(26396),y=s(68760),b=s(12779),N=s(91819),w=s(61120),R=s.n(w);function C(e){let{onExport:a}=e,[s,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),c=[{id:"pdf-report",name:"PDF Report",icon:j.Z,description:"Complete analytics report",format:"pdf",type:"report"},{id:"csv-data",name:"CSV Data",icon:v.Z,description:"Raw data export",format:"csv",type:"data"},{id:"png-charts",name:"PNG Charts",icon:y.Z,description:"Chart images",format:"png",type:"charts"}],o=async e=>{l(!0),n(!1);try{"pdf"===e.format?await d():"csv"===e.format?await m():"png"===e.format&&await x(),a&&await a(e.format,e.type)}catch(e){console.error("Export error:",e)}finally{l(!1)}},d=async()=>{let e=new N.ZP;e.setFontSize(20),e.text("TeachGage Analytics Report",20,30),e.setFontSize(12),e.text("Generated on: ".concat(new Date().toLocaleDateString()),20,45),e.setFontSize(16),e.text("Executive Summary",20,65),e.setFontSize(10),["• Total Responses: 1,247","• Average Rating: 4.3/5.0","• Response Rate: 87.5%","• Active Courses: 45","• Top Department: Computer Science (4.5 avg rating)"].forEach((a,s)=>{e.text(a,25,80+8*s)});try{let a=document.querySelectorAll("[data-chart]"),s=130;for(let t=0;t<Math.min(a.length,2);t++){let r=a[t],n=await R()(r,{scale:1,useCORS:!0,allowTaint:!0}),i=n.toDataURL("image/png"),l=170*n.height/n.width;s+l>280&&(e.addPage(),s=20),e.addImage(i,"PNG",20,s,170,l),s+=l+20}}catch(e){console.warn("Could not capture charts for PDF:",e)}e.save("teachgage-analytics-report.pdf")},m=async()=>{let e=new Blob([[["Date","Responses","Average Rating","Response Rate"],["2024-01-01","23","4.2","85%"],["2024-01-02","31","4.1","88%"],["2024-01-03","28","4.4","90%"],["2024-01-04","35","4.3","87%"],["2024-01-05","42","4.5","92%"],["2024-01-06","38","4.2","89%"],["2024-01-07","45","4.6","94%"]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let s=URL.createObjectURL(e);a.setAttribute("href",s),a.setAttribute("download","teachgage-analytics-data.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},x=async()=>{let e=document.querySelectorAll("[data-chart]");for(let a=0;a<e.length;a++)try{let s=e[a];(await R()(s,{scale:2,useCORS:!0,allowTaint:!0})).toBlob(e=>{let s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="teachgage-chart-".concat(a+1,".png"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},"image/png")}catch(e){console.error("Error capturing chart ".concat(a+1,":"),e)}};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>n(!s),disabled:i,className:"flex items-center px-4 py-2 bg-teachgage-blue text-white rounded-lg hover:bg-teachgage-medium-blue transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),i?"Exporting...":"Export"]}),s&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-3 py-2",children:"Export Options"}),c.map(e=>{let a=e.icon;return(0,t.jsxs)("button",{onClick:()=>o(e),className:"w-full flex items-center px-3 py-2 text-left hover:bg-gray-50 rounded transition-colors",children:[(0,t.jsx)(a,{className:"h-4 w-4 text-gray-400 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]})]},e.id)})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 p-3",children:(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 PDF reports include charts and summaries. CSV exports contain raw data for further analysis."})})]}),s&&(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})}function k(e){let{organizationId:a=null,departmentId:s=null}=e,[m,x]=(0,r.useState)(null),[h,j]=(0,r.useState)(!0),[v,y]=(0,r.useState)("30d"),[b,N]=(0,r.useState)("responses"),[w,R]=(0,r.useState)({department:"all",course:"all",instructor:"all"});(0,r.useEffect)(()=>{k()},[v,w,a,s]);let k=async()=>{j(!0);try{await new Promise(e=>setTimeout(e,1500)),x({overview:{totalCourses:45,activeSurveys:12,totalResponses:1247,averageRating:4.3,responseRate:87.5,completionRate:92.1,participationGrowth:15.2,satisfactionTrend:8.7},trends:[{date:"2024-01-01",responses:23,averageRating:4.2,responseRate:85},{date:"2024-01-02",responses:31,averageRating:4.1,responseRate:88},{date:"2024-01-03",responses:28,averageRating:4.4,responseRate:90},{date:"2024-01-04",responses:35,averageRating:4.3,responseRate:87},{date:"2024-01-05",responses:42,averageRating:4.5,responseRate:92},{date:"2024-01-06",responses:38,averageRating:4.2,responseRate:89},{date:"2024-01-07",responses:45,averageRating:4.6,responseRate:94}],topPerformers:[{instructorId:"inst_1",name:"Dr. Sarah Johnson",department:"Computer Science",averageRating:4.8,responseCount:156,courses:3},{instructorId:"inst_2",name:"Prof. Michael Chen",department:"Mathematics",averageRating:4.7,responseCount:142,courses:4},{instructorId:"inst_3",name:"Dr. Emily Rodriguez",department:"Business",averageRating:4.6,responseCount:128,courses:2}],departmentBreakdown:[{name:"Computer Science",responses:345,rating:4.5,courses:12},{name:"Mathematics",responses:298,rating:4.3,courses:15},{name:"Business",responses:234,rating:4.2,courses:8},{name:"Physics",responses:198,rating:4.4,courses:10},{name:"English",responses:172,rating:4.1,courses:18}],responseRateByTime:[{hour:"8:00",rate:45},{hour:"9:00",rate:78},{hour:"10:00",rate:92},{hour:"11:00",rate:88},{hour:"12:00",rate:65},{hour:"13:00",rate:72},{hour:"14:00",rate:85},{hour:"15:00",rate:90},{hour:"16:00",rate:82},{hour:"17:00",rate:68}],heatmapData:[{course:"CS101",week:1,responses:25,rating:4.2},{course:"CS101",week:2,responses:28,rating:4.3},{course:"CS101",week:3,responses:22,rating:4.1},{course:"MATH201",week:1,responses:32,rating:4.5},{course:"MATH201",week:2,responses:35,rating:4.4},{course:"MATH201",week:3,responses:30,rating:4.6},{course:"BUS301",week:1,responses:18,rating:4},{course:"BUS301",week:2,responses:20,rating:4.2},{course:"BUS301",week:3,responses:16,rating:3.9}]})}catch(e){console.error("Error fetching analytics:",e),d.ZP.error("Failed to load analytics data")}finally{j(!1)}},S=async(e,a)=>{try{d.ZP.loading("Preparing export..."),await new Promise(e=>setTimeout(e,2e3)),d.ZP.dismiss(),d.ZP.success("".concat(e.toUpperCase()," export completed!")),console.log("Exporting ".concat(a," as ").concat(e))}catch(e){d.ZP.dismiss(),d.ZP.error("Export failed. Please try again.")}};return h?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"bg-gray-200 h-24 rounded-lg"},a))}),(0,t.jsx)("div",{className:"bg-gray-200 h-64 rounded-lg"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)("div",{className:"bg-gray-200 h-48 rounded-lg"}),(0,t.jsx)("div",{className:"bg-gray-200 h-48 rounded-lg"})]})]})}):m?(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights into course evaluations and feedback"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("select",{value:v,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,t.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,t.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,t.jsx)("option",{value:"1y",children:"Last year"})]}),(0,t.jsx)(C,{onExport:S})]})]}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(i.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsxs)("select",{value:w.department,onChange:e=>R(a=>({...a,department:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Departments"}),(0,t.jsx)("option",{value:"cs",children:"Computer Science"}),(0,t.jsx)("option",{value:"math",children:"Mathematics"}),(0,t.jsx)("option",{value:"business",children:"Business"})]}),(0,t.jsxs)("select",{value:w.course,onChange:e=>R(a=>({...a,course:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Courses"}),(0,t.jsx)("option",{value:"active",children:"Active Courses"}),(0,t.jsx)("option",{value:"completed",children:"Completed Courses"})]}),(0,t.jsxs)("select",{value:w.instructor,onChange:e=>R(a=>({...a,instructor:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Instructors"}),(0,t.jsx)("option",{value:"top",children:"Top Performers"}),(0,t.jsx)("option",{value:"new",children:"New Instructors"})]})]})}),(0,t.jsx)(g,{metrics:m.overview}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trend Analysis"}),(0,t.jsxs)("select",{value:b,onChange:e=>N(e.target.value),className:"px-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-teachgage-blue focus:border-transparent",children:[(0,t.jsx)("option",{value:"responses",children:"Responses"}),(0,t.jsx)("option",{value:"averageRating",children:"Average Rating"}),(0,t.jsx)("option",{value:"responseRate",children:"Response Rate"})]})]}),(0,t.jsx)(p,{data:m.trends,metric:b})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Response Rate by Time"}),(0,t.jsx)(u,{data:m.responseRateByTime})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Performance"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Department"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Responses"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Avg Rating"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Courses"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Performance"})]})}),(0,t.jsx)("tbody",{children:m.departmentBreakdown.map((e,a)=>(0,t.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,t.jsx)("td",{className:"py-3 px-4 font-medium text-gray-900",children:e.name}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.responses}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4 text-yellow-400 mr-1"}),(0,t.jsx)("span",{className:"text-gray-900",children:e.rating})]})}),(0,t.jsx)("td",{className:"py-3 px-4 text-gray-600",children:e.courses}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:(0,t.jsx)("div",{className:"bg-teachgage-blue h-2 rounded-full",style:{width:"".concat(e.rating/5*100,"%")}})}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(e.rating/5*100),"%"]})]})})]},a))})]})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Instructors"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.topPerformers.map((e,a)=>(0,t.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["#",a+1]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.department}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(l.Z,{className:"h-4 w-4 text-yellow-400 mr-1"}),(0,t.jsx)("span",{className:"font-medium",children:e.averageRating})]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{children:e.responseCount})]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-600",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{children:e.courses})]})]})]},a))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Course Performance Heatmap"}),(0,t.jsx)(f,{data:m.heatmapData})]})]}):(0,t.jsxs)("div",{className:"p-6 text-center",children:[(0,t.jsx)(n.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Data"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Unable to load analytics data. Please try again."})]})}},96225:function(e,a,s){s.d(a,{Z:function(){return C}});var t=s(85893),r=s(67294),n=s(11163),i=s(41664),l=s.n(i),c=s(38361),o=s(89176),d=s(28562),m=s(8267),x=s(89354),h=s(52217),g=s(2553),p=s(55264),u=s(70095),f=s(14235),j=s(86691),v=s(73416),y=s(62190),b=s(70775),N=s(78497),w=s(36127),R=s(77918);function C(e){let{children:a,title:s="Admin Dashboard"}=e,[i,C]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),Z=(0,n.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("adminToken"),a=localStorage.getItem("adminUser");if(!e||!a){Z.push("/admin/login");return}try{S(JSON.parse(a))}catch(e){console.error("Error parsing admin user:",e),Z.push("/admin/login")}},[Z]);let A=[{name:"Dashboard",href:"/admin/platform/dashboard",icon:c.Z,current:"/admin/platform/dashboard"===Z.pathname},{name:"Organizations",href:"/admin/platform/organizations",icon:o.Z,current:Z.pathname.startsWith("/admin/platform/organizations")},{name:"System Analytics",href:"/admin/platform/analytics",icon:d.Z,current:Z.pathname.startsWith("/admin/platform/analytics")},{name:"User Management",href:"/admin/platform/users",icon:m.Z,current:Z.pathname.startsWith("/admin/platform/users")},{name:"Data Management",href:"/admin/platform/data-management",icon:x.Z,current:Z.pathname.startsWith("/admin/platform/data-management")},{name:"System Health",href:"/admin/platform/system-health",icon:h.Z,current:Z.pathname.startsWith("/admin/platform/system-health")},{name:"Audit Logs",href:"/admin/platform/audit-logs",icon:g.Z,current:Z.pathname.startsWith("/admin/platform/audit-logs")},{name:"Settings",href:"/admin/platform/settings",icon:p.Z,current:Z.pathname.startsWith("/admin/platform/settings")}],D=[{name:"Dashboard",href:"/admin/organization/dashboard",icon:c.Z,current:"/admin/organization/dashboard"===Z.pathname},{name:"Users",href:"/admin/organization/users",icon:o.Z,current:Z.pathname.startsWith("/admin/organization/users")},{name:"Departments",href:"/admin/organization/departments",icon:u.Z,current:Z.pathname.startsWith("/admin/organization/departments")},{name:"Analytics",href:"/admin/organization/analytics",icon:d.Z,current:Z.pathname.startsWith("/admin/organization/analytics")},{name:"Billing",href:"/admin/organization/billing",icon:f.Z,current:Z.pathname.startsWith("/admin/organization/billing")},{name:"Notifications",href:"/admin/organization/notifications",icon:j.Z,current:Z.pathname.startsWith("/admin/organization/notifications")},{name:"Settings",href:"/admin/organization/settings",icon:p.Z,current:Z.pathname.startsWith("/admin/organization/settings")}],T=Z.pathname.startsWith("/admin/platform")?A:D,P=Z.pathname.startsWith("/admin/platform")?"Platform":"Organization",z=async()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),Z.push("/admin/login")};return k?(0,t.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-100",children:[(0,t.jsxs)("div",{className:"".concat(i?"translate-x-0":"-translate-x-full"," fixed inset-y-0 left-0 z-50 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 bg-gray-800 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(v.Z,{className:"h-8 w-8 text-teachgage-blue mr-2"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-lg font-bold text-white",children:"TeachGage"}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[P," Admin"]})]})]}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"lg:hidden text-gray-400 hover:text-white",children:(0,t.jsx)(y.Z,{className:"h-6 w-6"})})]}),(0,t.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:T.map(e=>{let a=e.icon;return(0,t.jsxs)(l(),{href:e.href,className:"flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ".concat(e.current?"bg-teachgage-blue text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,t.jsx)(a,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})}),(0,t.jsx)("div",{className:"absolute bottom-0 w-full p-4 bg-gray-800 border-t border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center",children:(0,t.jsx)(v.Z,{className:"h-4 w-4 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-white truncate",children:[null==k?void 0:k.firstName," ",null==k?void 0:k.lastName]}),(0,t.jsx)("p",{className:"text-xs text-gray-300 truncate",children:null==k?void 0:k.email})]}),(0,t.jsx)("button",{onClick:z,className:"text-gray-300 hover:text-white transition-colors",title:"Sign Out",children:(0,t.jsx)(b.Z,{className:"h-5 w-5"})})]})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("button",{onClick:()=>C(!0),className:"lg:hidden text-gray-600 hover:text-gray-900 mr-4",children:(0,t.jsx)(N.Z,{className:"h-6 w-6"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search admin...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teachgage-blue focus:border-transparent w-64"}),(0,t.jsx)(w.Z,{className:"h-5 w-5 text-gray-400 absolute left-3 top-2.5"})]}),(0,t.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,t.jsx)(R.Z,{className:"h-6 w-6"}),(0,t.jsx)("span",{className:"absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full"})]}),(0,t.jsxs)("div",{className:"flex items-center px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-1"}),P," Admin"]})]})]})}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto bg-gray-50",children:(0,t.jsx)("div",{className:"p-6",children:a})})]}),i&&(0,t.jsx)("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 lg:hidden",onClick:()=>C(!1)})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-teachgage-blue"})})}}}]);